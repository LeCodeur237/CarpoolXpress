import{_ as e}from"./VLoader.vue_vue_type_style_index_0_lang-CbYSQEO1.js";import{_ as t}from"./VFlexPagination.vue_vue_type_script_setup_true_lang-4rrBlE-A.js";import{_ as a}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-bvwFgOti.js";import{_ as s}from"./VButton.vue_vue_type_style_index_0_lang-7AzKEDfl.js";import{e as l,E as i,r,Q as n,w as u,o,t as c,v as d,x as m,Y as p,a4 as v,m as _,j as h,H as g,I as y,L as f,J as w,R as x,S as b,y as j}from"./index-D0hxrqC2.js";import{_ as k,a as P}from"./search-1-dark-DV4mRi9_.js";import{u as R}from"./viewWrapper-Bt2ctQXZ.js";import{u as N}from"./defaultResource-Cajrc19W.js";import{D as $}from"./datetime-xmklhC0O.js";import{b as E}from"./route-block-B_A1xBdJ.js";import"./VFlex.vue_vue_type_style_index_0_lang-BNMWLBeL.js";import"./_plugin-vue_export-helper-BCo6x5W8.js";import"./useNotyf-NZFZ9G1y.js";import"./notyf-C-d_IrqK.js";import"./useFetch-Bhw7oTLc.js";const A={class:"list-view-toolbar"},B={class:"search-widget",style:{width:"300px"}},V={class:"field"},F={class:"control"},D=["disabled"],I=[m("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:search"},null,-1)],L={class:"buttons"},S={class:"page-content-inner"},U=m("img",{class:"light-image",src:k,alt:""},null,-1),M=m("img",{class:"dark-image",src:P,alt:""},null,-1),O={key:1,class:"is-list_view"},T=m("div",{class:"is-list_header"},[m("div",{class:"is-list_header-item",style:{width:"30%"}}," # "),m("div",{class:"is-list_header-item",style:{width:"15%"}}," Date "),m("div",{class:"is-list_header-item",style:{width:"15%"}}," Address "),m("div",{class:"is-list_header-item",style:{width:"15%"}}),m("div",{class:"is-list_header-item",style:{width:"15%"}}," Bank "),m("div",{class:"is-list_header-item",style:{width:"10%"}})],-1),H={class:"is-list_line-item is-user",style:{width:"30%"}},W={class:"is-user_metadata"},q={class:"has-text-primary is-underlined"},z={class:"is-list_line-item",style:{width:"15%"}},C={class:"is-list_line-item",style:{width:"15%"}},G={class:"is-list_line-item",style:{width:"15%"}},J={class:"is-list_line-item",style:{width:"15%"}},Q=m("div",{class:"is-list_line-item",style:{width:"10%"}},null,-1),X=l({__name:"accounts",setup(l){const k=R(),P=N(),E=i(),X=r(""),Y=r(!1),K=r({currentPage:1,perPage:10,total:0,page:1}),Z=r([]),ee=n((()=>{let e=Z.value;!X.value||X.value.length<1||(e=e.filter((e=>e.firstName?.match(new RegExp(X.value,"i"))||e.lastName?.match(new RegExp(X.value,"i"))||e.email?.match(new RegExp(X.value,"i"))||e.city?.match(new RegExp(X.value,"i"))||e.address?.match(new RegExp(X.value,"i"))||e.country?.match(new RegExp(X.value,"i"))||e.province?.match(new RegExp(X.value,"i"))))),K.value.total=e.length;const t=(K.value.currentPage-1)*K.value.perPage,a=t+K.value.perPage;return e.slice(t,a)})),te=async()=>{try{Y.value=!0;const e=`/UserBankAccount/GetAllUserBankAccount?pageNumber=${K.value.page}&pageSize=${K.value.perPage}`,{data:t,total:a}=await P.list(e,!0);t&&(Z.value=t,K.value.total=a,K.value.total=Math.ceil(a/K.value.perPage))}catch(e){console.error("An error has occurred: ",e)}finally{Y.value=!1}};return u((()=>E.query.page),(async e=>{e?(K.value.page=parseInt(e),await te()):(K.value.page=1,await te())}),{immediate:!0}),o((async()=>{k.setPageTitle("List of User Bank Accounts"),await te()})),(l,i)=>{const r=s,n=a,u=t,o=e;return c(),d("div",null,[m("div",A,[m("div",B,[m("div",V,[m("div",F,[p(m("input",{"onUpdate:modelValue":i[0]||(i[0]=e=>h(X)?X.value=e:null),type:"text",class:"input",placeholder:"Rechercher..."},null,512),[[v,_(X)]]),m("button",{class:"search-button",disabled:_(X).length<1},I,8,D)])])]),m("div",L,[g(r,{color:"primary",icon:"feather:refresh-ccw",elevated:"",rounded:""},{default:y((()=>[f(" Refresh ")])),_:1})])]),g(o,{active:_(Y)},{default:y((()=>[m("div",S,[0===_(ee).length?(c(),w(n,{key:0,title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\r\n              filter terms you've entered. Please try different filter terms or\r\n              criteria.",larger:""},{image:y((()=>[U,M])),_:1})):(c(),d("div",O,[T,(c(!0),d(x,null,b(_(ee),(e=>(c(),d("div",{key:e.id,class:"is-list_line"},[m("div",H,[m("div",W,[m("h3",null,j(`${e.lastName} ${e.firstName}`),1),m("p",null,j(e.email),1),m("p",q,j(e.telNum),1)])]),m("div",z,[m("p",null,j(_($).fromISO(e.creationDate).toFormat("dd/MM/yy")),1),m("p",null,[m("small",null,[m("b",null,j(_($).fromISO(e.creationDate).toFormat("hh:mm a")),1)])])]),m("div",C,[m("p",null,j(e.country),1),m("p",null,j(`${e.city} - ${e.province}`),1)]),m("div",G,[m("p",null,j(e.address),1),m("p",null,j(`poBox: ${e.postalCode}`),1)]),m("div",J,[m("p",null,j(e.accountNumber),1),m("p",null,j(`${e.etablismentNumber} - ${e.transitNumber}`),1)]),Q])))),128))])),g(u,{"item-per-page":_(K)?.perPage,"total-items":_(K)?.total,"current-page":_(K)?.page,"max-links-displayed":7},null,8,["item-per-page","total-items","current-page"])])])),_:1},8,["active"])])}}});"function"==typeof E&&E(X);export{X as default};
