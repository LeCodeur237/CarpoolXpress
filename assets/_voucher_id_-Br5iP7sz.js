import{c as e,_ as t,a as l,v as a,b as i,d as r}from"./v4-CB9Yc7cl.js";import{_ as o}from"./VLoader.vue_vue_type_style_index_0_lang-CbYSQEO1.js";import{_ as n}from"./VSwitchBlock.vue_vue_type_style_index_0_lang-BF5S3rXM.js";import{_ as s,a as u}from"./VOption.vue_vue_type_style_index_0_lang-DsDoknmt.js";import{_ as d}from"./VField.vue_vue_type_script_setup_true_lang-CsNJ73tU.js";import{_ as c}from"./VControl-4WS_r1eh.js";import{_ as p}from"./VInput.vue_vue_type_script_setup_true_lang-BaNcWhfu.js";import{_ as m}from"./VIconButton-CUCv5Ru5.js";import{_ as v}from"./VModal.vue_vue_type_style_index_0_lang-Y56UMdgn.js";import{e as f,t as b,v as y,x as h,M as g,y as _,z as w,g as k,E as x,r as C,f as j,Q as E,o as S,w as D,J as T,I as V,H as L,L as U,R as N,S as P,V as O,Y as A,ar as I,m as M,a5 as F,K as z}from"./index-D0hxrqC2.js";import{_ as B}from"./VFlex.vue_vue_type_style_index_0_lang-BNMWLBeL.js";import{_ as $}from"./VAvatar.vue_vue_type_style_index_0_lang-D2xYvs0s.js";import{_ as H}from"./VCard.vue_vue_type_script_setup_true_lang-DZFwwV5m.js";import{_ as R}from"./VIcon.vue_vue_type_script_setup_true_lang-l94fBQJx.js";import{_ as W}from"./VBlock.vue_vue_type_style_index_0_lang-BGUV17ZY.js";import{_ as J}from"./VButtons.vue_vue_type_script_setup_true_lang-CXBQg6mg.js";import{_ as q}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-bvwFgOti.js";import{_ as Y}from"./VButton.vue_vue_type_style_index_0_lang-7AzKEDfl.js";import{_ as Q}from"./Corporate-logo-Main-1-2048x740-Bh6N2_UN.js";import{u as X}from"./viewWrapper-Bt2ctQXZ.js";import{u as Z}from"./defaultResource-Cajrc19W.js";import{u as G}from"./useNotyf-NZFZ9G1y.js";import{D as K}from"./datetime-xmklhC0O.js";import{b as ee}from"./route-block-B_A1xBdJ.js";import"./_plugin-vue_export-helper-BCo6x5W8.js";import"./useFetch-Bhw7oTLc.js";import"./notyf-C-d_IrqK.js";const te={class:"section-placeholder"},le={class:"placeholder-content"},ae={class:"dark-inverted"},ie={key:0},re=f({__name:"VPlaceholderSection",props:{title:{},subtitle:{default:void 0}},setup(e){const t=e;return(e,l)=>(b(),y("div",te,[h("div",le,[g(e.$slots,"image"),h("h3",ae,_(t.title),1),t.subtitle?(b(),y("p",ie,_(t.subtitle),1)):w("",!0),g(e.$slots,"action")])]))}});var oe,ne={exports:{}};window,oe=function(){return function(e){var t={};function l(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,l),i.l=!0,i.exports}return l.m=e,l.c=t,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)l.d(a,i,function(t){return e[t]}.bind(null,i));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l(l.s=0)}({"./src/index.js":
/*!**********************!*\
	  !*** ./src/index.js ***!
	  \**********************/
/*! exports provided: default */function(e,t,l){l.r(t),l(/*! ./sass/index.scss */"./src/sass/index.scss");var a=l(/*! ./js/init */"./src/js/init.js").default.init;"undefined"!=typeof window&&(window.printJS=a),t.default=a},"./src/js/browser.js":
/*!***************************!*\
	  !*** ./src/js/browser.js ***!
	  \***************************/
/*! exports provided: default */function(e,t,l){l.r(t);var a={isFirefox:function(){return"undefined"!=typeof InstallTrigger},isIE:function(){return-1!==navigator.userAgent.indexOf("MSIE")||!!document.documentMode},isEdge:function(){return!a.isIE()&&!!window.StyleMedia},isChrome:function(){return!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window).chrome},isSafari:function(){return Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||-1!==navigator.userAgent.toLowerCase().indexOf("safari")},isIOSChrome:function(){return-1!==navigator.userAgent.toLowerCase().indexOf("crios")}};t.default=a},"./src/js/functions.js":
/*!*****************************!*\
	  !*** ./src/js/functions.js ***!
	  \*****************************/
/*! exports provided: addWrapper, capitalizePrint, collectStyles, addHeader, cleanUp, isRawHTML */function(e,t,l){l.r(t),l.d(t,"addWrapper",(function(){return o})),l.d(t,"capitalizePrint",(function(){return n})),l.d(t,"collectStyles",(function(){return s})),l.d(t,"addHeader",(function(){return d})),l.d(t,"cleanUp",(function(){return c})),l.d(t,"isRawHTML",(function(){return p}));var a=l(/*! ./modal */"./src/js/modal.js"),i=l(/*! ./browser */"./src/js/browser.js");function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){return'<div style="font-family:'+t.font+" !important; font-size: "+t.font_size+' !important; width:100%;">'+e+"</div>"}function n(e){return e.charAt(0).toUpperCase()+e.slice(1)}function s(e,t){for(var l="",a=(document.defaultView||window).getComputedStyle(e,""),i=0;i<a.length;i++)(-1!==t.targetStyles.indexOf("*")||-1!==t.targetStyle.indexOf(a[i])||u(t.targetStyles,a[i]))&&a.getPropertyValue(a[i])&&(l+=a[i]+":"+a.getPropertyValue(a[i])+";");return l+="max-width: "+t.maxWidth+"px !important; font-size: "+t.font_size+" !important;"}function u(e,t){for(var l=0;l<e.length;l++)if("object"===r(t)&&-1!==t.indexOf(e[l]))return!0;return!1}function d(e,t){var l=document.createElement("div");if(p(t.header))l.innerHTML=t.header;else{var a=document.createElement("h1"),i=document.createTextNode(t.header);a.appendChild(i),a.setAttribute("style",t.headerStyle),l.appendChild(a)}e.insertBefore(l,e.childNodes[0])}function c(e){e.showModal&&a.default.close(),e.onLoadingEnd&&e.onLoadingEnd(),(e.showModal||e.onLoadingStart)&&window.URL.revokeObjectURL(e.printable);var t="mouseover";(i.default.isChrome()||i.default.isFirefox())&&(t="focus"),window.addEventListener(t,(function l(){window.removeEventListener(t,l),e.onPrintDialogClose();var a=document.getElementById(e.frameId);a&&a.remove()}))}function p(e){return new RegExp("<([A-Za-z][A-Za-z0-9]*)\\b[^>]*>(.*?)</\\1>").test(e)}},"./src/js/html.js":
/*!************************!*\
	  !*** ./src/js/html.js ***!
	  \************************/
/*! exports provided: default */function(e,t,l){l.r(t);var a=l(/*! ./functions */"./src/js/functions.js"),i=l(/*! ./print */"./src/js/print.js");function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var l=e.cloneNode(),i=Array.prototype.slice.call(e.childNodes),r=0;r<i.length;r++)if(-1===t.ignoreElements.indexOf(i[r].id)){var n=o(i[r],t);l.appendChild(n)}switch(t.scanStyles&&1===e.nodeType&&l.setAttribute("style",Object(a.collectStyles)(e,t)),e.tagName){case"SELECT":l.value=e.value;break;case"CANVAS":l.getContext("2d").drawImage(e,0,0)}return l}t.default={print:function(e,t){var l,n="object"===r(l=e.printable)&&l&&(l instanceof HTMLElement||1===l.nodeType)?e.printable:document.getElementById(e.printable);n?(e.printableElement=o(n,e),e.header&&Object(a.addHeader)(e.printableElement,e),i.default.send(e,t)):window.console.error("Invalid HTML element id: "+e.printable)}}},"./src/js/image.js":
/*!*************************!*\
	  !*** ./src/js/image.js ***!
	  \*************************/
/*! exports provided: default */function(e,t,l){l.r(t);var a=l(/*! ./functions */"./src/js/functions.js"),i=l(/*! ./print */"./src/js/print.js"),r=l(/*! ./browser */"./src/js/browser.js");t.default={print:function(e,t){e.printable.constructor!==Array&&(e.printable=[e.printable]),e.printableElement=document.createElement("div"),e.printable.forEach((function(t){var l=document.createElement("img");if(l.setAttribute("style",e.imageStyle),l.src=t,r.default.isFirefox()){var a=l.src;l.src=a}var i=document.createElement("div");i.appendChild(l),e.printableElement.appendChild(i)})),e.header&&Object(a.addHeader)(e.printableElement,e),i.default.send(e,t)}}},"./src/js/init.js":
/*!************************!*\
	  !*** ./src/js/init.js ***!
	  \************************/
/*! exports provided: default */function(e,t,l){l.r(t);var a=l(/*! ./browser */"./src/js/browser.js"),i=l(/*! ./modal */"./src/js/modal.js"),r=l(/*! ./pdf */"./src/js/pdf.js"),o=l(/*! ./html */"./src/js/html.js"),n=l(/*! ./raw-html */"./src/js/raw-html.js"),s=l(/*! ./image */"./src/js/image.js"),u=l(/*! ./json */"./src/js/json.js");function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}var c=["pdf","html","image","json","raw-html"];t.default={init:function(){var e={printable:null,fallbackPrintable:null,type:"pdf",header:null,headerStyle:"font-weight: 300;",maxWidth:800,properties:null,gridHeaderStyle:"font-weight: bold; padding: 5px; border: 1px solid #dddddd;",gridStyle:"border: 1px solid lightgray; margin-bottom: -1px;",showModal:!1,onError:function(e){throw e},onLoadingStart:null,onLoadingEnd:null,onPrintDialogClose:function(){},onIncompatibleBrowser:function(){},modalMessage:"Retrieving Document...",frameId:"printJS",printableElement:null,documentTitle:"Document",targetStyle:["clear","display","width","min-width","height","min-height","max-height"],targetStyles:["border","box","break","text-decoration"],ignoreElements:[],repeatTableHeader:!0,css:null,style:null,scanStyles:!0,base64:!1,onPdfOpen:null,font:"TimesNewRoman",font_size:"12pt",honorMarginPadding:!0,honorColor:!1,imageStyle:"max-width: 100%;"},t=arguments[0];if(void 0===t)throw new Error("printJS expects at least 1 attribute.");switch(d(t)){case"string":e.printable=encodeURI(t),e.fallbackPrintable=e.printable,e.type=arguments[1]||e.type;break;case"object":for(var l in e.printable=t.printable,e.fallbackPrintable=void 0!==t.fallbackPrintable?t.fallbackPrintable:e.printable,e.fallbackPrintable=e.base64?"data:application/pdf;base64,".concat(e.fallbackPrintable):e.fallbackPrintable,e)"printable"!==l&&"fallbackPrintable"!==l&&(e[l]=void 0!==t[l]?t[l]:e[l]);break;default:throw new Error('Unexpected argument type! Expected "string" or "object", got '+d(t))}if(!e.printable)throw new Error("Missing printable information.");if(!e.type||"string"!=typeof e.type||-1===c.indexOf(e.type.toLowerCase()))throw new Error("Invalid print type. Available types are: pdf, html, image and json.");e.showModal&&i.default.show(e),e.onLoadingStart&&e.onLoadingStart();var p=document.getElementById(e.frameId);p&&p.parentNode.removeChild(p);var m=document.createElement("iframe");switch(a.default.isFirefox()?m.setAttribute("style","width: 1px; height: 100px; position: fixed; left: 0; top: 0; opacity: 0; border-width: 0; margin: 0; padding: 0"):m.setAttribute("style","visibility: hidden; height: 0; width: 0; position: absolute; border: 0"),m.setAttribute("id",e.frameId),"pdf"!==e.type&&(m.srcdoc="<html><head><title>"+e.documentTitle+"</title>",e.css&&(Array.isArray(e.css)||(e.css=[e.css]),e.css.forEach((function(e){m.srcdoc+='<link rel="stylesheet" href="'+e+'">'}))),m.srcdoc+="</head><body></body></html>"),e.type){case"pdf":if(a.default.isIE())try{console.info("Print.js doesn't support PDF printing in Internet Explorer."),window.open(e.fallbackPrintable,"_blank").focus(),e.onIncompatibleBrowser()}catch(v){e.onError(v)}finally{e.showModal&&i.default.close(),e.onLoadingEnd&&e.onLoadingEnd()}else r.default.print(e,m);break;case"image":s.default.print(e,m);break;case"html":o.default.print(e,m);break;case"raw-html":n.default.print(e,m);break;case"json":u.default.print(e,m)}}}},"./src/js/json.js":
/*!************************!*\
	  !*** ./src/js/json.js ***!
	  \************************/
/*! exports provided: default */function(e,t,l){l.r(t);var a=l(/*! ./functions */"./src/js/functions.js"),i=l(/*! ./print */"./src/js/print.js");function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}t.default={print:function(e,t){if("object"!==r(e.printable))throw new Error("Invalid javascript data object (JSON).");if("boolean"!=typeof e.repeatTableHeader)throw new Error("Invalid value for repeatTableHeader attribute (JSON).");if(!e.properties||!Array.isArray(e.properties))throw new Error("Invalid properties array for your JSON data.");e.properties=e.properties.map((function(t){return{field:"object"===r(t)?t.field:t,displayName:"object"===r(t)?t.displayName:t,columnSize:"object"===r(t)&&t.columnSize?t.columnSize+";":100/e.properties.length+"%;"}})),e.printableElement=document.createElement("div"),e.header&&Object(a.addHeader)(e.printableElement,e),e.printableElement.innerHTML+=function(e){var t=e.printable,l=e.properties,i='<table style="border-collapse: collapse; width: 100%;">';e.repeatTableHeader&&(i+="<thead>"),i+="<tr>";for(var r=0;r<l.length;r++)i+='<th style="width:'+l[r].columnSize+";"+e.gridHeaderStyle+'">'+Object(a.capitalizePrint)(l[r].displayName)+"</th>";i+="</tr>",e.repeatTableHeader&&(i+="</thead>"),i+="<tbody>";for(var o=0;o<t.length;o++){i+="<tr>";for(var n=0;n<l.length;n++){var s=t[o],u=l[n].field.split(".");if(u.length>1)for(var d=0;d<u.length;d++)s=s[u[d]];else s=s[l[n].field];i+='<td style="width:'+l[n].columnSize+e.gridStyle+'">'+s+"</td>"}i+="</tr>"}return i+="</tbody></table>"}(e),i.default.send(e,t)}}},"./src/js/modal.js":
/*!*************************!*\
	  !*** ./src/js/modal.js ***!
	  \*************************/
/*! exports provided: default */function(e,t,l){l.r(t);var a={show:function(e){var t=document.createElement("div");t.setAttribute("style","font-family:sans-serif; display:table; text-align:center; font-weight:300; font-size:30px; left:0; top:0;position:fixed; z-index: 9990;color: #0460B5; width: 100%; height: 100%; background-color:rgba(255,255,255,.9);transition: opacity .3s ease;"),t.setAttribute("id","printJS-Modal");var l=document.createElement("div");l.setAttribute("style","display:table-cell; vertical-align:middle; padding-bottom:100px;");var i=document.createElement("div");i.setAttribute("class","printClose"),i.setAttribute("id","printClose"),l.appendChild(i);var r=document.createElement("span");r.setAttribute("class","printSpinner"),l.appendChild(r);var o=document.createTextNode(e.modalMessage);l.appendChild(o),t.appendChild(l),document.getElementsByTagName("body")[0].appendChild(t),document.getElementById("printClose").addEventListener("click",(function(){a.close()}))},close:function(){var e=document.getElementById("printJS-Modal");e&&e.parentNode.removeChild(e)}};t.default=a},"./src/js/pdf.js":
/*!***********************!*\
	  !*** ./src/js/pdf.js ***!
	  \***********************/
/*! exports provided: default */function(e,t,l){l.r(t);var a=l(/*! ./print */"./src/js/print.js"),i=l(/*! ./functions */"./src/js/functions.js");function r(e,t,l){var i=new window.Blob([l],{type:"application/pdf"});i=window.URL.createObjectURL(i),t.setAttribute("src",i),a.default.send(e,t)}t.default={print:function(e,t){if(e.base64){var l=Uint8Array.from(atob(e.printable),(function(e){return e.charCodeAt(0)}));r(e,t,l)}else{e.printable=/^(blob|http|\/\/)/i.test(e.printable)?e.printable:window.location.origin+("/"!==e.printable.charAt(0)?"/"+e.printable:e.printable);var a=new window.XMLHttpRequest;a.responseType="arraybuffer",a.addEventListener("error",(function(){Object(i.cleanUp)(e),e.onError(a.statusText,a)})),a.addEventListener("load",(function(){if(-1===[200,201].indexOf(a.status))return Object(i.cleanUp)(e),void e.onError(a.statusText,a);r(e,t,a.response)})),a.open("GET",e.printable,!0),a.send()}}}},"./src/js/print.js":
/*!*************************!*\
	  !*** ./src/js/print.js ***!
	  \*************************/
/*! exports provided: default */function(e,t,l){l.r(t);var a=l(/*! ./browser */"./src/js/browser.js"),i=l(/*! ./functions */"./src/js/functions.js"),r={send:function(e,t){document.getElementsByTagName("body")[0].appendChild(t);var l=document.getElementById(e.frameId);l.onload=function(){if("pdf"!==e.type){var t=l.contentWindow||l.contentDocument;if(t.document&&(t=t.document),t.body.appendChild(e.printableElement),"pdf"!==e.type&&e.style){var i=document.createElement("style");i.innerHTML=e.style,t.head.appendChild(i)}var r=t.getElementsByTagName("img");r.length>0?function(e){var t=e.map((function(e){if(e.src&&e.src!==window.location.href)return function(e){return new Promise((function(t){!function l(){e&&void 0!==e.naturalWidth&&0!==e.naturalWidth&&e.complete?t():setTimeout(l,500)}()}))}(e)}));return Promise.all(t)}(Array.from(r)).then((function(){return o(l,e)})):o(l,e)}else a.default.isFirefox()?setTimeout((function(){return o(l,e)}),1e3):o(l,e)}}};function o(e,t){try{if(e.focus(),a.default.isEdge()||a.default.isIE())try{e.contentWindow.document.execCommand("print",!1,null)}catch(l){e.contentWindow.print()}else e.contentWindow.print()}catch(r){t.onError(r)}finally{a.default.isFirefox()&&(e.style.visibility="hidden",e.style.left="-1px"),Object(i.cleanUp)(t)}}t.default=r},"./src/js/raw-html.js":
/*!****************************!*\
	  !*** ./src/js/raw-html.js ***!
	  \****************************/
/*! exports provided: default */function(e,t,l){l.r(t);var a=l(/*! ./print */"./src/js/print.js");t.default={print:function(e,t){e.printableElement=document.createElement("div"),e.printableElement.setAttribute("style","width:100%"),e.printableElement.innerHTML=e.printable,a.default.send(e,t)}}},"./src/sass/index.scss":
/*!*****************************!*\
	  !*** ./src/sass/index.scss ***!
	  \*****************************/
/*! no static exports found */function(e,t,l){},0:
/*!****************************!*\
	  !*** multi ./src/index.js ***!
	  \****************************/
/*! no static exports found */function(e,t,l){e.exports=l(/*! ./src/index.js */"./src/index.js")}}).default};const se=k(ne.exports=oe()),ue=h("img",{class:"light-image",src:"/assets/error-2-15QihhE9.svg",alt:"Error"},null,-1),de=h("img",{class:"dark-image",src:"/assets/error-2-dark-DdIm2Dkl.svg",alt:"Error"},null,-1),ce={key:1,id:"printableCouponArea",class:"voucher-detail-page"},pe={class:"columns is-vcentered is-multiline mb-5"},me={class:"column"},ve={class:"ticket-card"},fe={class:"ticket-main"},be=h("img",{src:Q,alt:"Company Logo",class:"ticket-logo"},null,-1),ye={class:"ticket-content"},he={class:"ticket-code"},ge={class:"ticket-validity"},_e={class:"column is-flex is-justify-content-flex-end no-print"},we={class:"detail-list"},ke={class:"detail-item"},xe=h("span",{class:"detail-label"},"Code:",-1),Ce={class:"detail-value"},je={class:"detail-item"},Ee=h("span",{class:"detail-label"},"Created At:",-1),Se={class:"detail-value"},De={class:"detail-item"},Te=h("span",{class:"detail-label"},"Description:",-1),Ve={class:"detail-value is-multiline"},Le={class:"detail-item"},Ue=h("span",{class:"detail-label"},"Validity Period:",-1),Ne={class:"detail-value"},Pe={class:"detail-item"},Oe=h("span",{class:"detail-label"},"Discount:",-1),Ae={class:"detail-value"},Ie={class:"detail-item"},Me=h("span",{class:"detail-label"},"Max Uses (Per User):",-1),Fe={class:"detail-value"},ze={class:"detail-item"},Be=h("span",{class:"detail-label"},"Max Uses (Total):",-1),$e={class:"detail-value"},He=h("span",{class:"detail-label"},"Applies To:",-1),Re={class:"detail-value"},We=h("span",{class:"detail-label"},"Applies To Drivers:",-1),Je={class:"detail-value"},qe=h("span",{class:"detail-label"},"Applies To Trips:",-1),Ye={class:"detail-value"},Qe={class:"bullet-list"},Xe={class:"bullet-list"},Ze=h("img",{class:"light-image",src:t,alt:"Not Found"},null,-1),Ge=h("img",{class:"dark-image",src:l,alt:"Not Found"},null,-1),Ke={class:"modal-form"},et={class:"modal-nav"},tt=h("h3",{class:"modal-step-title"}," Coupon Information ",-1),lt={class:"columns is-multiline"},at={class:"column is-6"},it={class:"column is-6"},rt={class:"modal-nav"},ot=h("h3",{class:"modal-step-title"}," Select Users (Passengers) ",-1),nt={class:"row mt-4"},st={class:"col-12 mb-4"},ut={class:"userSelection"},dt=h("p",null,"Available Passengers:",-1),ct={key:0,class:"list-placeholder"},pt={key:1,class:"list-placeholder"},mt=["onClick"],vt={key:3,class:"list-placeholder"},ft={class:"col-12"},bt={class:"userSelection"},yt={class:"userlist scrollable-list selected-items-list"},ht={key:0,class:"list-placeholder"},gt={class:"modal-nav"},_t=h("h3",{class:"modal-step-title"}," Select Drivers ",-1),wt={class:"row mt-4"},kt={class:"col-12"},xt={class:"userSelection"},Ct=h("p",null,"Available Drivers:",-1),jt={key:0,class:"list-placeholder"},Et={key:1,class:"list-placeholder"},St=["onClick"],Dt={key:3,class:"list-placeholder"},Tt={class:"col-12"},Vt={class:"userSelection"},Lt={class:"userlist scrollable-list selected-items-list"},Ut={key:0,class:"list-placeholder"},Nt={class:"modal-nav"},Pt=h("h3",{class:"modal-step-title"}," Select Applicable Trip Locations ",-1),Ot=h("div",{style:{width:"40px"}},null,-1),At={class:"rower mt-4"},It={class:"col-6"},Mt={class:"userSelection"},Ft=h("p",null,"Departure Towns/Cities:",-1),zt={key:0,class:"list-placeholder"},Bt=["onClick"],$t={class:"userSelection mt-4"},Ht={class:"userlist scrollable-list selected-items-list",style:{height:"120px"}},Rt={key:0,class:"list-placeholder"},Wt={class:"col-6"},Jt={class:"userSelection"},qt=h("p",null,"Destination Towns/Cities:",-1),Yt={key:0,class:"list-placeholder"},Qt=["onClick"],Xt={class:"userSelection mt-4"},Zt={class:"userlist scrollable-list selected-items-list",style:{height:"120px"}},Gt={key:0,class:"list-placeholder"},Kt={class:"col-6",style:{"margin-top":"1rem"}},el={class:"col-14"},tl=h("h1",null,"List of trips",-1),ll={class:"userlist scrollable-list"},al={key:0,class:"list-placeholder"},il=h("b",null,"Departure : ",-1),rl=h("b",null,"Destination : ",-1),ol=h("p",{class:"help is-info mt-4 has-text-centered"},[U(" The coupon will apply if the trip starts in a selected departure location "),h("b",null,"OR"),U(" ends in a selected destination location. Leave a list empty to not restrict by it. ")],-1),nl=f({__name:"[voucher_id]",setup(t){const l=x(),f=C(l.params.voucher_id),g=C(null),k=C(!0),Q=C(null),ee=G(),te=C(""),le=C(!1),ae=C(!1),ie=C(!1),oe=C(!1),ne=Z(),nl=X(),sl=C("index"),ul=C([]),dl=C([]),cl=C([]),pl=C(!1),ml=C([...e].sort()),vl=C(""),fl=C(""),bl=C(""),yl=C(""),hl=C([]),gl=C([]),_l=C([]),wl=C([]),kl=()=>({couponCode:g.value?.couponCode||"",description:g.value?.description||"",isDiscountPourcentage:g.value?.isDiscountPourcentage||!0,discount:g.value?.discount||0,startDate:K.fromISO(g.value?.startDate).toFormat("yyyy-MM-dd"),endDate:K.fromISO(g.value?.endDate).toFormat("yyyy-MM-dd"),maxNumberOfUsePerUser:g.value?.maxNumberOfUsePerUser||1,maxNumberOfUse:g.value?.maxNumberOfUse||1,isForEverybody:g.value?.isForEverybody||!1}),xl=j(kl()),Cl=E((()=>{const e=vl.value.toLowerCase().trim();return e?ul.value.filter((t=>(t.email??"").toLowerCase().includes(e))):ul.value})),jl=E((()=>{const e=fl.value.toLowerCase().trim();return e?dl.value.filter((t=>(t.email??"").toLowerCase().includes(e))):dl.value})),El=E((()=>{const e=bl.value.toLowerCase().trim();return e?ml.value.filter((t=>t.toLowerCase().includes(e))):ml.value})),Sl=E((()=>{const e=yl.value.toLowerCase().trim();return e?ml.value.filter((t=>t.toLowerCase().includes(e))):ml.value})),Dl=()=>{Object.assign(xl,kl()),hl.value=g.value?.userList||[],gl.value=g.value?.driverEmailList||[],cl.value=g.value?.couponTripList||[],vl.value="",fl.value="",bl.value="",yl.value="",sl.value="index"},Tl=()=>{Dl(),le.value=!0},Vl=()=>{ie.value=!0},Ll=()=>{le.value=!1,Dl()},Ul=()=>{ie.value=!1},Nl=e=>{"userlist"===e&&vl.value.trim()&&0===ul.value.length?Pl(vl.value.trim()):"driverlist"===e&&fl.value.trim()&&0===dl.value.length&&Pl(fl.value.trim()),sl.value=e},Pl=async e=>{if(!e.trim())return ul.value=[],dl.value=[],void(cl.value=[]);if(!pl.value){pl.value=!0;try{const t=await ne.find("/User",`FindListOfUsersByEmail?email=${encodeURIComponent(e.trim())}`);t&&Array.isArray(t)?(ul.value=t,dl.value=t):(ee.warning("Could not fetch user/driver list for selection."),ul.value=[],dl.value=[])}catch(t){console.error("Error fetching data for select inputs:",t),ee.error("Could not load data needed for coupon targeting."),ul.value=[],dl.value=[]}finally{pl.value=!1}}},Ol=((e,t)=>{let l;return(...a)=>{clearTimeout(l),l=setTimeout((()=>e(...a)),t)}})(Pl,500),Al=async e=>{try{const t=await ne.find("/Coupon/FindCouponById",`?Id=${e}`);if(!t)throw ee.error("Could not fetch voucher details."),new Error("Could not fetch voucher details.");return t}catch(t){throw new Error(t.message||"Failed to fetch voucher details.")}},Il=e=>{if(!e)return"N/A";try{const t=e instanceof Date?K.fromJSDate(e):K.fromISO(e);return t.isValid?t.toFormat("dd MMM yyyy"):"Invalid Date"}catch(t){return console.warn("Date formatting error:",t),"Invalid Date"}},Ml=e=>{te.value===e?te.value="":te.value=e};S((async()=>{nl.setPageTitle("Coupon Details"),k.value=!0,Q.value=null,g.value=null;try{const e=await Al(f.value);g.value=e}catch(e){Q.value=e.message||"Failed to fetch voucher details."}finally{k.value=!1}}));const Fl=async()=>{ae.value=!0;try{if(!f.value)return void ee.error("No voucher ID provided.");const e={couponCode:xl.couponCode.trim(),description:xl.description.trim(),isDiscountPourcentage:xl.isDiscountPourcentage,...xl.isDiscountPourcentage?{discount:xl.discount/100}:{discount:xl.discount},startDate:xl.startDate,endDate:xl.endDate,maxNumberOfUsePerUser:xl.maxNumberOfUsePerUser,maxNumberOfUse:xl.maxNumberOfUse,isForEverybody:xl.isForEverybody,...xl.isForEverybody?{userList:[],driverEmailList:[],couponTripList:[],passengerEmailList:[]}:{userList:hl.value,driverEmailList:gl.value,couponTripList:cl.value,passengerEmailList:[]}};await ne.edit("/Coupon/UpdateCoupon?Id="+f.value,e)&&g.value&&g.value.couponCode?(ee.success(`Coupon "${g.value.couponCode}" updated successfully!`),await Al(f.value),await Ll(),le.value=!1,ae.value=!1,window.location.reload()):ee.error("Failed to update coupon.")}catch(e){ee.error(`Error updating coupon: ${e.message||"Unknown error"}`)}finally{ae.value=!1}};D((()=>xl.isForEverybody),(e=>{e&&(hl.value=[],gl.value=[],cl.value=[],sl.value="index")})),D(vl,(e=>{e.trim().length>0?Ol(e.trim()):ul.value=[]})),D(fl,(e=>{e.trim().length>0?Ol(e.trim()):dl.value=[]}));const zl=()=>{se({printable:"printableCouponArea",type:"html",header:`Coupon: ${g.value?.couponCode||"Details"}`,style:"\n    body { margin: 0; padding: 0; } /* Reset body for print iframe */\n    .voucher-detail-page {\n      width: 100%;\n      padding: 20px; /* Add some padding for the printed page */\n      margin: 0 auto;\n      box-sizing: border-box;\n    }\n    .no-print { display: none !important; }\n    .ticket-card {\n      width: 220px; /* Fixed width for consistency */\n      margin: 0 auto 20px auto; /* Center ticket */\n      box-shadow: none !important;\n      border: 1px solid #ccc !important;\n      background-color: #ffbb02 !important;\n      -webkit-print-color-adjust: exact !important;\n      print-color-adjust: exact !important;\n      color: black !important;\n      padding: 15px !important;\n    }\n    .ticket-card .ticket-logo { width: 70px; height: auto; margin-bottom: 5px; }\n    .ticket-card .ticket-main { text-align: center; }\n    .ticket-card .ticket-code { font-size: 14px; color: black !important; margin-top: 5px; font-weight: 900; }\n    .ticket-card .ticket-validity, .ticket-card .ticket-validity b { font-size: 12px; color: black !important; }\n    .VCard.carte {\n      box-shadow: none !important;\n      border: 1px solid #eee !important;\n      padding: 1rem !important;\n    }\n    .detail-list { padding: 0; }\n    .detail-item { display: flex; justify-content: space-between; padding: 0.5rem 0; border-bottom: 1px solid #eee; font-size: 10pt; }\n    .detail-item:last-child { border-bottom: none; }\n    .detail-label { font-weight: 500; color: #555; margin-right: 1rem; }\n    .detail-value { color: #000; text-align: right; }\n    .bullet-list { list-style-type: disc; padding-left: 20px; font-size: 10pt; }\n    .bullet-list li { margin-bottom: 0.3rem; }\n    /* Hide Vuero specific UI elements that are not part of the coupon itself if they appear */\n    .VBlock_title_13r36_17, .VBlock_subtitle_13r36_23 { margin-bottom: 10px !important; }\n    .voucher-detail-page .pa-5.mb-5 { display: block !important; visibility: visible !important; opacity: 1 !important; }\n    .voucher-detail-page .VFlex, .voucher-detail-page .bullet-list { display: block !important; visibility: visible !important; }\n  ",documentTitle:`Coupon - ${g.value?.couponCode||"Print"}`,targetStyles:["*"],scanStyles:!0,font_size:"10pt",onError:e=>{console.error("Error printing with print-js:",e),ee.error("Could not print the coupon. Please try again.")}})};return(e,t)=>{const l=Y,f=q,x=J,C=W,j=R,E=H,S=$,D=B,X=re,Z=v,G=m,K=p,se=c,nl=d,ul=s,dl=u,ml=i,kl=n,Dl=o,Pl=r;return b(),T(Dl,{active:k.value,class:"is-fullheight",overlay:""},{default:V((()=>[Q.value?(b(),T(f,{key:0,title:"Error Fetching Voucher",subtitle:Q.value,larger:""},{image:V((()=>[ue,de])),action:V((()=>[L(l,{color:"primary"},{default:V((()=>[U(" Back to Vouchers ")])),_:1})])),_:1},8,["subtitle"])):g.value?(b(),y("div",ce,[h("div",pe,[h("div",me,[h("div",ve,[h("div",fe,[be,h("div",ye,[h("h1",he,_(g.value.couponCode),1),h("p",ge,[U(" Valid to: "),h("b",null,_(Il(g.value.endDate)),1)])])])])]),h("div",_e,[L(x,{class:"is-justify-content-flex-start is-justify-content-flex-end-tablet"},{default:V((()=>[L(l,{color:"warning",icon:"fas fa-edit",elevated:"",onClick:Tl},{default:V((()=>[U(" Edit Coupon ")])),_:1}),L(l,{color:"info",icon:"fas fa-print",elevated:"",class:"no-print",onClick:zl},{default:V((()=>[U(" Print "+_(g.value.couponCode),1)])),_:1})])),_:1})])]),L(E,{class:"pa-5 mb-5 carte"},{default:V((()=>[L(C,{title:"Voucher Details",subtitle:"Core information about this voucher",class:"mb-4"}),h("div",we,[h("div",ke,[xe,h("span",Ce,_(g.value.couponCode),1)]),h("div",je,[Ee,h("span",Se,_(Il(g.value.creationDate)),1)]),h("div",De,[Te,h("span",Ve,_(g.value.description),1)]),h("div",Le,[Ue,h("span",Ne,_(Il(g.value.startDate))+" - "+_(Il(g.value.endDate)),1)]),h("div",Pe,[Oe,h("span",Ae,_(g.value.isDiscountPourcentage?100*g.value.discount:g.value.discount)+" "+_(g.value.isDiscountPourcentage?"%":"$"),1)]),h("div",Ie,[Me,h("span",Fe,_(g.value.maxNumberOfUsePerUser),1)]),h("div",ze,[Be,h("span",$e,_(g.value.maxNumberOfUse),1)]),h("div",{class:"detail-item is-clickable",onClick:t[0]||(t[0]=e=>g.value.isForEverybody?void 0:Ml("users"))},[He,h("span",Re,[U(_(g.value.isForEverybody?"All Users":"Specific Users")+" ",1),g.value.isForEverybody?w("",!0):(b(),T(j,{key:0,icon:"users"===te.value?"lucide:chevron-down":"lucide:chevron-right",class:"ml-1"},null,8,["icon"]))])]),g.value.driverEmailList&&g.value.driverEmailList.length>0?(b(),y("div",{key:0,class:"detail-item is-clickable",onClick:t[1]||(t[1]=e=>Ml("drivers"))},[We,h("span",Je,[U(_(g.value.driverEmailList.length)+" specific driver(s) ",1),L(j,{icon:"drivers"===te.value?"lucide:chevron-down":"lucide:chevron-right",class:"ml-1"},null,8,["icon"])])])):w("",!0),g.value.couponTripList&&g.value.couponTripList.length>0?(b(),y("div",{key:1,class:"detail-item is-clickable",onClick:t[2]||(t[2]=e=>Ml("trips"))},[qe,h("span",Ye,[U(_(g.value.couponTripList.length)+" specific trip rule(s) ",1),L(j,{icon:"trips"===te.value?"lucide:chevron-down":"lucide:chevron-right",class:"ml-1"},null,8,["icon"])])])):w("",!0)])])),_:1}),L(O,{name:"fade-slow"},{default:V((()=>["users"===te.value&&!g.value.isForEverybody&&g.value.userList&&g.value.userList.length>0?(b(),T(E,{key:0,class:"pa-5 mb-5"},{default:V((()=>[L(C,{title:"Targeted Users",subtitle:"This coupon applies to the following users",class:"mb-4"}),L(D,{"flex-wrap":"wrap","align-items":"center","row-gap":"1rem","column-gap":"0.5rem"},{default:V((()=>[(b(!0),y(N,null,P(g.value.userList,(e=>(b(),T(S,{key:e.id,initials:`${e.firstName?.[0]??""}${e.lastName?.[0]??""}`.toUpperCase(),"data-tooltip":`${e.firstName} ${e.lastName} (${e.email})`,size:"medium",squared:""},null,8,["initials","data-tooltip"])))),128))])),_:1})])),_:1})):"users"!==te.value||g.value.isForEverybody?w("",!0):(b(),T(E,{key:1,class:"pa-5 mb-5"},{default:V((()=>[L(C,{title:"Targeted Users",subtitle:"No specific users are targeted for this coupon."})])),_:1}))])),_:1}),L(O,{name:"fade-slow"},{default:V((()=>["drivers"===te.value&&g.value.driverEmailList&&g.value.driverEmailList.length>0?(b(),T(E,{key:0,class:"pa-5 mb-5"},{default:V((()=>[L(C,{title:"Targeted Drivers",subtitle:"This coupon applies to the following drivers",class:"mb-4"}),h("ul",Qe,[(b(!0),y(N,null,P(g.value.driverEmailList,((e,t)=>(b(),y("li",{key:t},_(e),1)))),128))])])),_:1})):w("",!0)])),_:1}),L(O,{name:"fade-slow"},{default:V((()=>["trips"===te.value&&g.value.couponTripList&&g.value.couponTripList.length>0?(b(),T(E,{key:0,class:"pa-5 mb-5"},{default:V((()=>[L(C,{title:"Targeted Trip Locations",subtitle:"This coupon applies if a trip matches these rules (OR logic)",class:"mb-4"}),h("ul",Xe,[(b(!0),y(N,null,P(g.value.couponTripList,(e=>(b(),y("li",{key:e.id||`${e.departureTown}-${e.destinationTown}`},[U(" Departure: "),h("b",null,_(e.departureTown||"Any"),1),U(", Destination: "),h("b",null,_(e.destinationTown||"Any"),1)])))),128))])])),_:1})):w("",!0)])),_:1}),L(x,{class:"is-justify-content-flex-start is-justify-content-flex-end-tablet"},{default:V((()=>[L(l,{color:"primary",class:"no-print",icon:"lucide:delete",onClick:Vl},{default:V((()=>[U(" Delete Coupon ")])),_:1}),L(l,{color:"dark",icon:"lucide:arrow-left",to:"/app/settings/referral/voucher"},{default:V((()=>[U(" Back to Vouchers ")])),_:1})])),_:1})])):k.value?w("",!0):(b(),T(f,{key:2,title:"Voucher Not Found",subtitle:"The voucher you are looking for could not be found or does not exist.",larger:""},{image:V((()=>[Ze,Ge])),action:V((()=>[L(l,{color:"primary",to:"app/settings/referral/voucher"},{default:V((()=>[U(" Back to Vouchers ")])),_:1})])),_:1})),L(Z,{open:ie.value,actions:"center",title:"Delete Coupon",noclose:"",onClose:Ul},{content:V((()=>[L(X,{title:"You are about to delete the coupon "+g.value?.couponCode,subtitle:"This action cannot be undone. Are you sure you want to proceed?",icon:"lucide:trash-2","icon-color":"red","icon-size":"large","icon-style":"rounded","icon-bg-color":"rgba(255, 0, 0, 0.1)","icon-bg-color-hover":"rgba(255, 0, 0, 0.2)","icon-bg-color-active":"rgba(255, 0, 0, 0.3)","icon-bg-color-focus":"rgba(255, 0, 0, 0.4)"},null,8,["title"])])),action:V((()=>[L(l,{color:"primary",raised:"",onClick:t[3]||(t[3]=e=>(async e=>{if(e)try{await ne.remove("/Coupon/","DeleteCoupon?Id="+e)?(ee.success("Coupon deleted successfully!"),Ul()):(ee.error("Failed to delete coupon."),Ul())}catch(t){ee.error(`Error deleting coupon: ${t.message||"Unknown error"}`),Ul()}else ee.error("No voucher ID provided.")})(g.value?.id||""))},{default:V((()=>[U(" Confirm ")])),_:1})])),_:1},8,["open"]),L(Z,{open:le.value,size:"large",actions:"center",title:"Create a new coupon",noclose:"",onClose:Ll},{content:V((()=>[L(Dl,{active:ae.value,card:"regular"},{default:V((()=>[h("form",{onSubmit:t[24]||(t[24]=z(((...t)=>e.createCoupon&&e.createCoupon(...t)),["prevent"]))},[h("div",Ke,[A(h("div",null,[h("div",et,[tt,L(G,{icon:"lucide:move-right",circle:"",disabled:M(xl).isForEverybody,onClick:t[4]||(t[4]=e=>Nl("userlist"))},null,8,["disabled"])]),h("div",lt,[h("div",at,[L(nl,{label:"Coupon code *"},{default:V((()=>[L(se,null,{default:V((()=>[L(K,{modelValue:M(xl).couponCode,"onUpdate:modelValue":t[5]||(t[5]=e=>M(xl).couponCode=e),modelModifiers:{trim:!0},placeholder:"e.g., SUMMER20",required:""},null,8,["modelValue"])])),_:1})])),_:1}),L(nl,{label:"Type of discount *"},{default:V((()=>[L(se,null,{default:V((()=>[L(dl,{modelValue:M(xl).isDiscountPourcentage,"onUpdate:modelValue":t[6]||(t[6]=e=>M(xl).isDiscountPourcentage=e)},{default:V((()=>[L(ul,{value:!0},{default:V((()=>[U(" Percentage ")])),_:1}),L(ul,{value:!1},{default:V((()=>[U(" Amount ")])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1}),L(nl,{label:"Discount Value *"},{default:V((()=>[L(se,null,{default:V((()=>[L(K,{modelValue:M(xl).discount,"onUpdate:modelValue":t[7]||(t[7]=e=>M(xl).discount=e),modelModifiers:{number:!0},type:"number",placeholder:M(xl).isDiscountPourcentage?"e.g., 10":"e.g., 5.00",min:"0.01",step:"any",required:""},null,8,["modelValue","placeholder"])])),_:1})])),_:1}),L(nl,{label:"Start date *"},{default:V((()=>[L(se,{icon:"lucide:calendar-days"},{default:V((()=>[L(K,{modelValue:M(xl).startDate,"onUpdate:modelValue":t[8]||(t[8]=e=>M(xl).startDate=e),type:"date",required:""},null,8,["modelValue"])])),_:1})])),_:1}),L(nl,{label:"End date *"},{default:V((()=>[L(se,{icon:"lucide:calendar-days"},{default:V((()=>[L(K,{modelValue:M(xl).endDate,"onUpdate:modelValue":t[9]||(t[9]=e=>M(xl).endDate=e),type:"date",required:""},null,8,["modelValue"])])),_:1})])),_:1})]),h("div",it,[L(nl,{label:"Description *"},{default:V((()=>[L(se,null,{default:V((()=>[L(ml,{modelValue:M(xl).description,"onUpdate:modelValue":t[10]||(t[10]=e=>M(xl).description=e),modelModifiers:{trim:!0},placeholder:"Brief description...",rows:"4",required:""},null,8,["modelValue"])])),_:1})])),_:1}),L(nl,{label:"Max uses per user *"},{default:V((()=>[L(se,{icon:"lucide:user-check"},{default:V((()=>[L(K,{modelValue:M(xl).maxNumberOfUsePerUser,"onUpdate:modelValue":t[11]||(t[11]=e=>M(xl).maxNumberOfUsePerUser=e),modelModifiers:{number:!0},type:"number",placeholder:"e.g., 1",min:"1",step:"1",required:""},null,8,["modelValue"])])),_:1})])),_:1}),L(nl,{label:"Max total uses *"},{default:V((()=>[L(se,{icon:"lucide:tag"},{default:V((()=>[L(K,{modelValue:M(xl).maxNumberOfUse,"onUpdate:modelValue":t[12]||(t[12]=e=>M(xl).maxNumberOfUse=e),modelModifiers:{number:!0},type:"number",placeholder:"e.g., 100",min:"1",step:"1",required:""},null,8,["modelValue"])])),_:1})])),_:1}),L(nl,{label:"Applies To"},{default:V((()=>[L(se,null,{default:V((()=>[L(kl,{modelValue:M(xl).isForEverybody,"onUpdate:modelValue":t[13]||(t[13]=e=>M(xl).isForEverybody=e),label:"Apply to all users",color:"primary"},null,8,["modelValue"])])),_:1})])),_:1})])])],512),[[I,"index"===sl.value]]),A(h("div",null,[h("div",rt,[L(G,{icon:"lucide:move-left",circle:"",onClick:t[14]||(t[14]=e=>Nl("index"))}),ot,L(G,{icon:"lucide:move-right",circle:"",onClick:t[15]||(t[15]=e=>Nl("driverlist"))})]),h("div",nt,[h("div",st,[h("div",ut,[dt,L(nl,{class:"mb-3",style:{width:"100%"}},{default:V((()=>[L(se,{icon:"feather:search"},{default:V((()=>[L(K,{modelValue:vl.value,"onUpdate:modelValue":t[16]||(t[16]=e=>vl.value=e),placeholder:"Search by email..."},null,8,["modelValue"])])),_:1})])),_:1}),h("div",{class:"userlist scrollable-list",style:F({display:vl.value.length>0?"block":"none"})},[pl.value?(b(),y("div",ct," Loading... ")):0===M(Cl).length?(b(),y("div",pt,' No passengers found matching "'+_(vl.value)+'". ',1)):w("",!0),pl.value?pl.value?w("",!0):(b(),y("div",vt," Start typing to search for passengers. ")):(b(),T(Dl,{key:2},{default:V((()=>[M(Cl).length>0?(b(!0),y(N,{key:0},P(M(Cl),(e=>(b(),y("ul",{key:e.id,class:"list-item",onClick:t=>(e=>{if(e&&e.id)try{if(hl.value.some((t=>t.userId===e.id)))return void ee.info(`${e.userDetail?.firstName??"User"} is already selected.`);const t={id:e.id,userId:e.userDetail?.userId,firstName:e.userDetail?.firstName??"",lastName:e.userDetail?.lastName??"",email:e.email??"",phoneNumber:e.phoneNumber??"",couponCode:xl.couponCode,discount:xl.discount,maxPersonalUseNumber:xl.maxNumberOfUsePerUser,currentPersonalUsesNumber:g.value?.userList?.find((t=>t.userId===e.id))?.currentPersonalUsesNumber??0,couponStartDate:xl.startDate,couponEndDate:xl.endDate,couponId:g.value?.id??""};hl.value.push(t),vl.value=""}catch(t){ee.error("An error occurred while selecting the user."),console.error("Error in selectUser:",t)}else ee.error("Cannot select invalid user data.")})(e)},[h("li",null,_(e.email),1)],8,mt)))),128)):w("",!0)])),_:1}))],4)])]),h("div",ft,[h("div",bt,[h("p",null,"Passengers Selected ("+_(hl.value.length)+"):",1),h("div",yt,[0===hl.value.length?(b(),y("div",ht," Click passengers on the left to select. ")):w("",!0),(b(!0),y(N,null,P(hl.value,(e=>(b(),T(Pl,{key:e.userId,title:e.email,white:"",icon:"fas fa-user",onClick:t=>{var l;(l=e.userId)&&(hl.value=hl.value.filter((e=>e.userId!==l)),ee.info("User removed from selection."))}},{default:V((()=>[L(j,{icon:"lucide:x"})])),_:2},1032,["title","onClick"])))),128))])])])])],512),[[I,"userlist"===sl.value]]),A(h("div",null,[h("div",gt,[L(G,{icon:"lucide:move-left",circle:"",onClick:t[17]||(t[17]=e=>Nl("userlist"))}),_t,L(G,{icon:"lucide:move-right",circle:"",onClick:t[18]||(t[18]=e=>Nl("triplist"))})]),h("div",wt,[h("div",kt,[h("div",xt,[Ct,L(nl,{class:"mb-3"},{default:V((()=>[L(se,{icon:"feather:search"},{default:V((()=>[L(K,{modelValue:fl.value,"onUpdate:modelValue":t[19]||(t[19]=e=>fl.value=e),placeholder:"Search by email..."},null,8,["modelValue"])])),_:1})])),_:1}),h("div",{class:"userlist scrollable-list",style:F({display:fl.value.length>0?"block":"none"})},[pl.value?(b(),y("div",jt," Loading... ")):0===M(jl).length?(b(),y("div",Et,' No drivers found matching "'+_(fl.value)+'". ',1)):w("",!0),pl.value?pl.value?w("",!0):(b(),y("div",Dt," Start typing to search for passengers. ")):(b(),T(Dl,{key:2},{default:V((()=>[M(jl).length>0?(b(!0),y(N,{key:0},P(M(jl),(e=>(b(),y("ul",{key:e.id,class:"list-item",onClick:t=>(e=>{if(e&&e.email)try{const t=e.email;if(gl.value.includes(t))return void ee.info(`${e.userDetail?.firstName??"Driver"} is already selected.`);gl.value.push(t),fl.value=""}catch(t){ee.error("An error occurred while selecting the driver."),console.error("Error in selectDriver:",t)}else ee.error("Cannot select invalid driver data (missing email).")})(e)},[h("li",null,_(e.email),1)],8,St)))),128)):w("",!0)])),_:1}))],4)])]),h("div",Tt,[h("div",Vt,[h("p",null," Drivers Selected ("+_(gl.value.length)+"): ",1),h("div",Lt,[0===gl.value.length?(b(),y("div",Ut," Click drivers on the left to select. ")):w("",!0),(b(!0),y(N,null,P(gl.value,((e,t)=>(b(),T(Pl,{key:t,title:e,white:"",icon:"fas fa-user",class:"font-size:6px",onClick:t=>{var l;(l=e)&&(gl.value=gl.value.filter((e=>e!==l)),ee.info("Driver removed from selection."))}},{default:V((()=>[L(j,{icon:"lucide:x"})])),_:2},1032,["title","onClick"])))),128))])])])])],512),[[I,"driverlist"===sl.value]]),A(h("div",null,[h("div",Nt,[L(G,{icon:"lucide:move-left",circle:"",onClick:t[20]||(t[20]=e=>Nl("driverlist"))}),Pt,Ot]),h("div",At,[h("div",It,[h("div",Mt,[Ft,L(nl,{class:"mb-3"},{default:V((()=>[L(se,{icon:"feather:search"},{default:V((()=>[L(K,{modelValue:bl.value,"onUpdate:modelValue":t[21]||(t[21]=e=>bl.value=e),placeholder:"Search departure..."},null,8,["modelValue"])])),_:1})])),_:1}),h("div",{class:"userlist scrollable-list",style:F({display:bl.value.length>0?"block":"none"})},[0===M(El).length?(b(),y("div",zt,' No locations found matching "'+_(bl.value)+'". ',1)):w("",!0),bl.value.length>0?(b(!0),y(N,{key:1},P(M(El),(e=>(b(),y("ul",{key:`dep-${e}`,class:"list-item",onClick:t=>{var l;(l=e)&&(_l.value.length>=1?ee.info("Only one town can be added"):_l.value.includes(l)?ee.info(`${l} is already selected for departure.`):(_l.value.push(l),bl.value=""))}},[h("li",null,_(e),1)],8,Bt)))),128)):w("",!0)],4),h("div",$t,[h("p",null," Selected Departures ("+_(_l.value.length)+"): ",1),h("div",Ht,[0===_l.value.length?(b(),y("div",Rt," Click locations above to select. ")):w("",!0),(b(!0),y(N,null,P(_l.value,(e=>(b(),T(Pl,{key:`sel-dep-${e}`,title:e,white:"",icon:"fas fa-location-arrow",class:"font-size:6px",onClick:t=>{var l;(l=e)&&(_l.value=_l.value.filter((e=>e!==l)),ee.info("Departure location removed."))}},{default:V((()=>[L(j,{icon:"lucide:x"})])),_:2},1032,["title","onClick"])))),128))])])])]),h("div",Wt,[h("div",Jt,[qt,L(nl,{class:"mb-3"},{default:V((()=>[L(se,{icon:"feather:search"},{default:V((()=>[L(K,{modelValue:yl.value,"onUpdate:modelValue":t[22]||(t[22]=e=>yl.value=e),placeholder:"Search destination..."},null,8,["modelValue"])])),_:1})])),_:1}),h("div",{class:"userlist scrollable-list",style:F({display:yl.value.length>0?"block":"none"})},[0===M(Sl).length?(b(),y("div",Yt,' No locations found matching "'+_(yl.value)+'". ',1)):w("",!0),yl.value.length>0?(b(!0),y(N,{key:1},P(M(Sl),(e=>(b(),y("ul",{key:`dest-${e}`,class:"list-item",onClick:t=>{var l;(l=e)&&(wl.value.length>=1?ee.info("Only one town can be added"):wl.value.includes(l)?ee.info(`${l} is already selected for destination.`):(wl.value.push(l),yl.value=""))}},[h("li",null,_(e),1)],8,Qt)))),128)):w("",!0)],4),h("div",Xt,[h("p",null," Selected Destinations ("+_(wl.value.length)+"): ",1),h("div",Zt,[0===wl.value.length?(b(),y("div",Gt," Click locations above to select. ")):w("",!0),(b(!0),y(N,null,P(wl.value,(e=>(b(),T(Pl,{key:`sel-dep-${e}`,title:e,white:"",icon:"fas fa-location-arrow",class:"font-size:6px",onClick:t=>{var l;(l=e)&&(wl.value=wl.value.filter((e=>e!==l)),ee.info("Destination location removed."))}},{default:V((()=>[L(j,{icon:"lucide:x"})])),_:2},1032,["title","onClick"])))),128))])])])]),h("div",Kt,[L(l,{color:"info",raised:"",loading:oe.value,disabled:0===_l.value.length||0===wl.value.length,onClick:t[23]||(t[23]=e=>((e,t)=>{if(!e||!t)return;if(0===e.length||0===t.length)return void ee.error("Please select at least one departure and one destination location.");const l=e,i=t,r={id:a(),departureTown:l[0],destinationTown:i[0]};cl.value.push(r),_l.value=[],wl.value=[],console.log("Trips added:",cl.value),oe.value=!1})(_l.value,wl.value))},{default:V((()=>[U(" Add Trip ")])),_:1},8,["loading","disabled"])]),h("div",el,[tl,h("div",ll,[0===cl.value.length?(b(),y("div",al," No trips added yet. ")):w("",!0),cl.value.length>0?(b(!0),y(N,{key:1},P(cl.value,(e=>(b(),y("ul",{key:e.id,class:"list-item-trip"},[h("li",null,[il,U(_(e.departureTown)+" - ",1),rl,U(_(e.destinationTown),1)]),L(G,{icon:"lucide:x",class:"ml-2",onClick:t=>{var l;(l=e.id)&&(cl.value=cl.value.filter((e=>e.id!==l)),ee.info("Trip removed from selection."))}},null,8,["onClick"])])))),128)):w("",!0)])])]),ol],512),[[I,"triplist"===sl.value]])])],32)])),_:1},8,["active"])])),action:V((()=>[L(l,{color:"primary",raised:"",loading:ae.value,disabled:ae.value||pl.value,onClick:Fl},{default:V((()=>[U(" Update Coupon ")])),_:1},8,["loading","disabled"])])),_:1},8,["open"])])),_:1},8,["active"])}}});"function"==typeof ee&&ee(nl);export{nl as default};
