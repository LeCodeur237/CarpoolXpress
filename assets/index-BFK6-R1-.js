import{_ as e}from"./VModal.vue_vue_type_style_index_0_lang-BekG8VLR.js";import{_ as t}from"./VLoader.vue_vue_type_style_index_0_lang-Dhf66N_2.js";import{_ as a}from"./VFlexPagination.vue_vue_type_script_setup_true_lang-C9SkWjaR.js";import{_ as i}from"./VTags.vue_vue_type_script_setup_true_lang-DYXKuVgD.js";import{_ as s}from"./VTag.vue_vue_type_style_index_0_lang-etj_z69o.js";import{_ as l}from"./VIconButton-BMA-ETBV.js";import{_ as r}from"./VAvatar.vue_vue_type_style_index_0_lang-8I4quGGY.js";import{_ as o}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-BjJPvU_c.js";import{_ as c}from"./VButton.vue_vue_type_style_index_0_lang-Ct3-45wW.js";import{e as n,E as d,r as u,w as m,o as v,t as p,v as g,x as y,A as f,m as _,Y as h,a4 as b,j as k,H as w,I as x,J as j,z as A,a5 as D,L as P,a6 as $,R as C,S as I,y as N,a1 as V,a2 as M,a7 as U}from"./index-9E-GM-ra.js";import{_ as S,a as q}from"./search-1-dark-DV4mRi9_.js";import{u as z}from"./viewWrapper-CXL7cLXa.js";import{u as F}from"./defaultResource-Bdsg8Ykk.js";import{D as R}from"./datetime-xmklhC0O.js";import{u as L}from"./useNotyf-BOmkemzM.js";import{b as T}from"./route-block-B_A1xBdJ.js";import{_ as B}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./useFetch-CdhACbSq.js";import"./notyf-WVWeOSLR.js";const E=e=>(V("data-v-2576a169"),e=e(),M(),e),O={class:"list-view-toolbar"},W={class:"is-viewmode_toggler"},G=[E((()=>y("i",{class:"iconify","aria-hidden":"true","data-icon":"material-symbols-light:event-list-outline-rounded"},null,-1)))],Y=[E((()=>y("i",{class:"iconify","aria-hidden":"true","data-icon":"material-symbols-light:grid-view-outline"},null,-1)))],H={class:"search-widget ml-4",style:{width:"300px"}},J={class:"field"},K={class:"control"},Q=["disabled"],X=[E((()=>y("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:search"},null,-1)))],Z={class:"buttons"},ee={class:"page-content-inner"},te={class:"card-grid card-grid-v3"},ae=E((()=>y("img",{class:"light-image",src:S,alt:""},null,-1))),ie=E((()=>y("img",{class:"dark-image",src:q,alt:""},null,-1))),se={class:"card-grid-item"},le={class:"dark-inverted"},re={class:"description"},oe={class:"light-text"},ce={class:"light-text"},ne={class:"light-text mt-4"},de={class:"is-flex gap-2 is-justify-content-center is-buttons"},ue={key:1,class:"is-list_view"},me=E((()=>y("div",{class:"is-list_header"},[y("div",{class:"is-list_header-item",style:{width:"35%"}}," # "),y("div",{class:"is-list_header-item",style:{width:"15%"}}," Contact "),y("div",{class:"is-list_header-item",style:{width:"10%"}}," Bio "),y("div",{class:"is-list_header-item",style:{width:"10%"}}," Statut "),y("div",{class:"is-list_header-item",style:{width:"30%"}})],-1))),ve={class:"is-list_line"},pe={class:"is-list_line-item is-user",style:{width:"35%"}},ge=["onClick"],ye={class:"is-user_metadata"},fe={class:"dark-inverted"},_e={class:"is-list_line-item",style:{width:"15%"}},he={class:"light-text"},be={class:"light-text"},ke={class:"is-list_line-item",style:{width:"10%"}},we={class:"light-text mt-4"},xe={class:"is-list_line-item",style:{width:"10%"}},je={class:"light-text mt-4"},Ae={class:"is-list_line-item is-actions",style:{width:"30%"}},De={class:"card-grid-item"},Pe={class:"dark-inverted"},$e={class:"description"},Ce={class:"light-text"},Ie={class:"light-text"},Ne={class:"light-text mt-4"},Ve={class:"is-flex gap-2 is-justify-content-center is-buttons"},Me=n({__name:"index",setup(n){const V=z(),M=F(),S=d(),q=u(!1),T=u(!1),B=u(),E=u([]),Me=u(""),Ue=L(),Se=u("list"),qe=u({page:1,itemsPerPage:6,totalItems:0,totalPages:0}),ze=async()=>{try{q.value=!0;let e=`/User/GetAllUsers?pageNumber=${qe.value.page}&pageSize=${qe.value.itemsPerPage}`;Me.value&&(e+=`&search=${encodeURIComponent(Me.value)}`);const t=await M.list(e,!0);t&&Array.isArray(t.data)?(E.value=t.data,qe.value.totalItems=t.total,qe.value.totalPages=Math.ceil(t.total/qe.value.itemsPerPage)):(E.value=[],qe.value.totalItems=0,qe.value.totalPages=0)}catch(e){console.error("An error has occurred: ",e)}finally{q.value=!1}},Fe=async(e,t)=>{if(e)try{await M.editStatut(`/User/UserActivation?userId=${e}&isActive=${t}`)?(Ue.success("User status updated successfully!"),await ze()):Ue.error("Failed to update user status. Please try again.")}catch(a){console.error("Error updating user status:",a);const e=a.response?.data?.message||a.message||"Unknown error";Ue.error(`Error updating status: ${e}`)}else Ue.error("Invalid User ID provided.")},Re=U((async()=>{qe.value.page=1,await ze()}),500);return m((()=>S.query.page),(async e=>{e?(qe.value.page=parseInt(e),await ze()):(qe.value.page=1,await ze())}),{immediate:!0}),m(Me,Re),v((async()=>{V.setPageTitle("List of Carpoolers"),await ze()})),(n,d)=>{const u=c,m=o,v=r,V=l,M=s,U=i,S=a,z=t,F=e;return p(),g("div",null,[y("div",O,[y("div",W,[y("span",{class:f(["is-viewmode","list"===_(Se)&&"is-active"]),onClick:d[0]||(d[0]=e=>Se.value="list")},G,2),y("span",{class:f(["is-viewmode","grid"===_(Se)&&"is-active"]),onClick:d[1]||(d[1]=e=>Se.value="grid")},Y,2)]),y("div",H,[y("div",J,[y("div",K,[h(y("input",{"onUpdate:modelValue":d[2]||(d[2]=e=>k(Me)?Me.value=e:null),type:"text",class:"input",placeholder:"Rechercher..."},null,512),[[b,_(Me)]]),y("button",{class:"search-button",disabled:_(Me).length<1},X,8,Q)])])]),y("div",Z,[w(u,{color:"primary",icon:"feather:refresh-ccw",elevated:""},{default:x((()=>[P(" Refresh ")])),_:1})])]),y("div",ee,[w(z,{active:_(q)},{default:x((()=>[y("div",te,[w(m,{class:f([0!==_(E).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n            search terms you've entered. Please try different search terms or\n            criteria.",larger:""},{image:x((()=>[ae,ie])),_:1},8,["class"]),w($,{name:"list",tag:"div",class:"columns is-multiline is-flex-tablet-p is-half-tablet-p"},{default:x((()=>["grid"===_(Se)?(p(!0),g(C,{key:0},I(_(E),(e=>(p(),g("div",{key:e.id,class:"column is-4"},[y("div",se,[w(v,{size:"large",initials:`${e.userDetail?.lastName[0]}${e.userDetail?.firstName[0]}`,squared:""},null,8,["initials"]),y("h3",le,N(`${e.userDetail?.lastName} ${e.userDetail?.firstName}`),1),y("p",null,[P(" Account created : "),y("b",null,N(_(R).fromISO(e.creationDate).toFormat("MMMM dd, yyyy hh:mm a")),1)]),y("div",re,[y("p",oe,N(e?.email),1),y("p",ce,N(e?.phoneNumber),1),y("em",ne,[P(" I'm "),y("b",null,N(!0===e?.isCodeVerified?"a driver":"just a client"),1)])]),y("div",de,[w(u,{color:"info",icon:"material-symbols-light:visibility-outline",elevated:"",to:`/app/carpoolers/${e.id}`},{default:x((()=>[P(" View Profile ")])),_:2},1032,["to"]),w(V,{style:{background:"var(--danger) !important",color:"#fff"},color:"danger",disabled:"",squared:"",icon:"material-symbols-light:restore-from-trash-outline"}),_(B).isActive?(p(),j(V,{key:0,icon:"lucide:circle-slash-2",color:"danger",title:"Deactivate profile",onClick:d[3]||(d[3]=e=>Fe(_(B).id,!1))})):A("",!0),_(B).isActive?A("",!0):(p(),j(V,{key:1,icon:"lucide:circle",color:"success",title:"Activate profile",onClick:d[4]||(d[4]=e=>Fe(_(B).id,!0))}))])])])))),128)):(p(),g("div",ue,[me,(p(!0),g(C,null,I(_(E),(e=>(p(),g("div",{key:e.id,class:""},[y("div",ve,[y("div",pe,[y("div",{style:{cursor:"pointer"},onClick:()=>{B.value=e,T.value=!0}},[w(v,{size:"large",initials:`${e.userDetail?.lastName[0]}${e.userDetail?.firstName[0]}`,badge:e.badge,squared:""},null,8,["initials","badge"])],8,ge),y("div",ye,[y("h3",fe,N(`${e.userDetail?.lastName} ${e.userDetail?.firstName}`),1),y("p",null,[P(" Account created : "),y("b",null,N(_(R).fromISO(e.creationDate).toFormat("MMMM dd, yyyy")),1)])])]),y("div",_e,[y("p",he,N(e?.email),1),y("p",be,N(e?.phoneNumber),1)]),y("div",ke,[y("em",we,[P(" I'm "),y("b",null,N(!0===e?.isCodeVerified?"a driver":"just a client"),1)])]),y("div",xe,[y("em",je,[w(U,null,{default:x((()=>[e.isActive?A("",!0):(p(),j(M,{key:0,color:"danger",label:"Desactived",rounded:""})),e.isActive?(p(),j(M,{key:1,color:"success",label:"Actived",rounded:""})):A("",!0)])),_:2},1024)])]),y("div",Ae,[w(u,{color:"info",icon:"material-symbols-light:visibility-outline",elevated:"",to:`/app/carpoolers/${e.id}`},{default:x((()=>[P(" View Profile ")])),_:2},1032,["to"]),w(V,{style:{background:"var(--danger) !important",color:"#fff"},color:"danger",disabled:"",squared:"",icon:"material-symbols-light:restore-from-trash-outline"}),e.isActive?(p(),j(V,{key:0,icon:"lucide:circle-slash-2",color:"danger",title:"Deactivate profile",onClick:t=>Fe(e.id,!1)},null,8,["onClick"])):A("",!0),e.isActive?A("",!0):(p(),j(V,{key:1,icon:"lucide:circle",color:"success",title:"Activate profile",onClick:t=>Fe(e.id,!0)},null,8,["onClick"]))])])])))),128))]))])),_:1}),w(S,{"item-per-page":_(qe)?.itemsPerPage,"total-items":_(qe)?.totalItems,"current-page":_(qe)?.page,"max-links-displayed":4,"no-router":"","onUpdate:currentPage":d[5]||(d[5]=e=>{_(qe).page=e,ze()})},null,8,["item-per-page","total-items","current-page"])])])),_:1},8,["active"])]),(p(),j(D,{to:"body"},[_(T)?(p(),j(F,{key:0,open:_(T),"onUpdate:open":d[8]||(d[8]=e=>k(T)?T.value=e:null),title:"User Details",size:"medium",nobg:"",noheader:"",noaction:"",onClose:d[9]||(d[9]=()=>T.value=!1)},{content:x((()=>[y("div",De,[w(v,{size:"big",initials:`${_(B).userDetail?.lastName[0]}${_(B).userDetail?.firstName[0]}`,badge:_(B).badge,squared:""},null,8,["initials","badge"]),y("h3",Pe,N(`${_(B).userDetail?.lastName} ${_(B).userDetail?.firstName}`),1),y("p",null,[P(" Account created : "),y("b",null,N(_(R).fromISO(_(B).creationDate).toFormat("MMMM dd, yyyy hh:mm a")),1)]),y("div",$e,[y("p",Ce,N(_(B)?.email),1),y("p",Ie,N(_(B)?.phoneNumber),1),y("em",Ne,[P(" I'm "),y("b",null,N(!0===_(B)?.isCodeVerified?"a driver":"just a client"),1)])]),y("div",Ve,[w(u,{color:"info",icon:"material-symbols-light:visibility-outline",elevated:"",to:`/app/carpoolers/${_(B).id}`},{default:x((()=>[P(" View Profile ")])),_:1},8,["to"]),w(V,{style:{background:"var(--danger) !important",color:"#fff"},color:"danger",disabled:"",squared:"",icon:"material-symbols-light:restore-from-trash-outline"}),!0===_(B).isActive?(p(),j(V,{key:0,icon:"lucide:circle-slash-2",color:"danger",title:"Deactivate profile",onClick:d[6]||(d[6]=e=>Fe(_(B).id,!1))})):A("",!0),!0!==_(B).isActive?(p(),j(V,{key:1,icon:"lucide:circle",color:"success",title:"Activate profile",onClick:d[7]||(d[7]=e=>Fe(_(B).id,!0))})):A("",!0)])])])),action:x((()=>[])),_:1},8,["open"])):A("",!0)]))])}}});"function"==typeof T&&T(Me);const Ue=B(Me,[["__scopeId","data-v-2576a169"]]);export{Ue as default};
