import{_ as e}from"./VModal.vue_vue_type_style_index_0_lang-BltQe-xz.js";import{_ as t}from"./VLoader.vue_vue_type_style_index_0_lang-C7-GgvIg.js";import{_ as i}from"./VFlexPagination.vue_vue_type_script_setup_true_lang-Cw9ZBBgT.js";import{_ as a}from"./VTags.vue_vue_type_script_setup_true_lang-DCt3cbpF.js";import{_ as s}from"./VTag.vue_vue_type_style_index_0_lang-CfiYdP3K.js";import{_ as l}from"./VIconButton-CtCxSKsr.js";import{_ as r}from"./VAvatar.vue_vue_type_style_index_0_lang-Bxz39T17.js";import{_ as o}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-DK1cPkHB.js";import{_ as c}from"./VButton.vue_vue_type_style_index_0_lang-B-ef5zKO.js";import{e as n,E as d,r as u,w as m,o as v,t as p,v as g,x as y,A as _,m as f,Y as h,a4 as b,j as k,H as w,I as x,J as j,z as A,a6 as D,L as C,a7 as P,R as $,S as I,y as N,a1 as V,a2 as M,a8 as U}from"./index-t9U-pc91.js";import{_ as q,a as F}from"./search-1-dark-DV4mRi9_.js";import{u as S}from"./viewWrapper-Yjs2_JvI.js";import{u as z}from"./defaultResource-C1sSR1bb.js";import{D as R}from"./datetime-xmklhC0O.js";import{u as T}from"./useNotyf-CMZ2FBRq.js";import{b as L}from"./route-block-B_A1xBdJ.js";import{_ as O}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./VFlex.vue_vue_type_style_index_0_lang-C5rz8FA7.js";import"./useFetch-r6-7WS48.js";import"./notyf-YfXYPISH.js";const B=e=>(V("data-v-d2d9edc5"),e=e(),M(),e),E={class:"list-view-toolbar"},H={class:"is-viewmode_toggler"},W=[B((()=>y("i",{class:"iconify","aria-hidden":"true","data-icon":"material-symbols-light:event-list-outline-rounded"},null,-1)))],G=[B((()=>y("i",{class:"iconify","aria-hidden":"true","data-icon":"material-symbols-light:grid-view-outline"},null,-1)))],J={class:"search-widget ml-4",style:{width:"300px"}},X={class:"field"},Y={class:"control"},K=["disabled"],Q=[B((()=>y("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:search"},null,-1)))],Z={class:"buttons"},ee={class:"page-content-inner"},te={class:"card-grid card-grid-v3"},ie=B((()=>y("img",{class:"light-image",src:q,alt:""},null,-1))),ae=B((()=>y("img",{class:"dark-image",src:F,alt:""},null,-1))),se={class:"card-grid-item"},le={class:"dark-inverted"},re={class:"description"},oe={class:"light-text"},ce={class:"light-text"},ne={class:"light-text mt-4"},de={class:"is-flex gap-2 is-justify-content-center is-buttons"},ue={key:1,class:"is-list_view"},me=B((()=>y("div",{class:"is-list_header"},[y("div",{class:"is-list_header-item",style:{width:"35%"}}," # "),y("div",{class:"is-list_header-item",style:{width:"15%"}}," Contact "),y("div",{class:"is-list_header-item",style:{width:"10%"}}," Bio "),y("div",{class:"is-list_header-item",style:{width:"10%"}}," Statut "),y("div",{class:"is-list_header-item",style:{width:"30%"}})],-1))),ve={class:"is-list_line"},pe={class:"is-list_line-item is-user",style:{width:"35%"}},ge=["onClick"],ye={class:"is-user_metadata"},_e={class:"dark-inverted"},fe={class:"is-list_line-item",style:{width:"15%"}},he={class:"light-text"},be={class:"light-text"},ke={class:"is-list_line-item",style:{width:"10%"}},we={class:"light-text mt-4"},xe={class:"is-list_line-item",style:{width:"10%"}},je={class:"light-text mt-4"},Ae={class:"is-list_line-item is-actions",style:{width:"30%"}},De={class:"card-grid-item"},Ce={class:"dark-inverted"},Pe={class:"description"},$e={class:"light-text"},Ie={class:"light-text"},Ne={class:"light-text mt-4"},Ve={class:"is-flex gap-2 is-justify-content-center is-buttons"},Me=n({__name:"index",setup(n){const V=S(),M=z(),q=d(),F=u(!1),L=u(!1),O=u(),B=u([]),Me=u(""),Ue=T(),qe=u("list"),Fe=u({page:1,itemsPerPage:6,totalItems:0,totalPages:0}),Se=async()=>{try{F.value=!0;let e=`/User/GetAllUsers?pageNumber=${Fe.value.page}&pageSize=${Fe.value.itemsPerPage}`;Me.value&&(e+=`&search=${encodeURIComponent(Me.value)}`);const t=await M.list(e,!0);t&&Array.isArray(t.data)?(B.value=t.data,Fe.value.totalItems=t.total,Fe.value.totalPages=Math.ceil(t.total/Fe.value.itemsPerPage)):(B.value=[],Fe.value.totalItems=0,Fe.value.totalPages=0)}catch(e){console.error("An error has occurred: ",e)}finally{F.value=!1}},ze=async(e,t)=>{if(e)try{await M.editStatut(`/User/UserActivation?userId=${e}&isActive=${t}`)?(Ue.success("User status updated successfully!"),await Se()):Ue.error("Failed to update user status. Please try again.")}catch(i){console.error("Error updating user status:",i);const e=i.response?.data?.message||i.message||"Unknown error";Ue.error(`Error updating status: ${e}`)}else Ue.error("Invalid User ID provided.")},Re=U((async()=>{Fe.value.page=1,await Se()}),500);return m((()=>q.query.page),(async e=>{e?(Fe.value.page=parseInt(e),await Se()):(Fe.value.page=1,await Se())}),{immediate:!0}),m(Me,Re),v((async()=>{V.setPageTitle("List of Carpoolers"),await Se()})),(n,d)=>{const u=c,m=o,v=r,V=l,M=s,U=a,q=i,S=t,z=e;return p(),g("div",null,[y("div",E,[y("div",H,[y("span",{class:_(["is-viewmode","list"===f(qe)&&"is-active"]),onClick:d[0]||(d[0]=e=>qe.value="list")},W,2),y("span",{class:_(["is-viewmode","grid"===f(qe)&&"is-active"]),onClick:d[1]||(d[1]=e=>qe.value="grid")},G,2)]),y("div",J,[y("div",X,[y("div",Y,[h(y("input",{"onUpdate:modelValue":d[2]||(d[2]=e=>k(Me)?Me.value=e:null),type:"text",class:"input",placeholder:"Rechercher..."},null,512),[[b,f(Me)]]),y("button",{class:"search-button",disabled:f(Me).length<1},Q,8,K)])])]),y("div",Z,[w(u,{color:"primary",icon:"feather:refresh-ccw",elevated:""},{default:x((()=>[C(" Refresh ")])),_:1})])]),y("div",ee,[w(S,{active:f(F)},{default:x((()=>[y("div",te,[w(m,{class:_([0!==f(B).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\r\n            search terms you've entered. Please try different search terms or\r\n            criteria.",larger:""},{image:x((()=>[ie,ae])),_:1},8,["class"]),w(P,{name:"list",tag:"div",class:"columns is-multiline is-flex-tablet-p is-half-tablet-p"},{default:x((()=>["grid"===f(qe)?(p(!0),g($,{key:0},I(f(B),(e=>(p(),g("div",{key:e.id,class:"column is-4"},[y("div",se,[w(v,{size:"large",initials:`${e.userDetail?.lastName[0]}${e.userDetail?.firstName[0]}`,squared:""},null,8,["initials"]),y("h3",le,N(`${e.userDetail?.lastName} ${e.userDetail?.firstName}`),1),y("p",null,[C(" Account created : "),y("b",null,N(f(R).fromISO(e.creationDate).toFormat("MMMM dd, yyyy hh:mm a")),1)]),y("div",re,[y("p",oe,N(e?.email),1),y("p",ce,N(e?.phoneNumber),1),y("em",ne,[C(" I'm "),y("b",null,N(!0===e?.isCodeVerified?"a driver":"just a client"),1)])]),y("div",de,[w(u,{color:"info",icon:"material-symbols-light:visibility-outline",elevated:"",to:`/app/carpoolers/${e.id}`},{default:x((()=>[C(" View Profile ")])),_:2},1032,["to"]),w(V,{style:{background:"var(--danger) !important",color:"#fff"},color:"danger",disabled:"",squared:"",icon:"material-symbols-light:restore-from-trash-outline"}),e.isActive?(p(),j(V,{key:0,icon:"lucide:circle-slash-2",color:"danger",title:"Deactivate profile",onClick:t=>ze(e.id,!1)},null,8,["onClick"])):A("",!0),e.isActive?A("",!0):(p(),j(V,{key:1,icon:"lucide:circle",color:"success",title:"Activate profile",onClick:t=>ze(e.id,!0)},null,8,["onClick"]))])])])))),128)):(p(),g("div",ue,[me,(p(!0),g($,null,I(f(B),(e=>(p(),g("div",{key:e.id,class:""},[y("div",ve,[y("div",pe,[y("div",{style:{cursor:"pointer"},onClick:()=>{O.value=e,L.value=!0}},[w(v,{size:"large",initials:`${e.userDetail?.lastName[0]}${e.userDetail?.firstName[0]}`,badge:e.badge,squared:""},null,8,["initials","badge"])],8,ge),y("div",ye,[y("h3",_e,N(`${e.userDetail?.lastName} ${e.userDetail?.firstName}`),1),y("p",null,[C(" Account created : "),y("b",null,N(f(R).fromISO(e.creationDate).toFormat("MMMM dd, yyyy")),1)])])]),y("div",fe,[y("p",he,N(e?.email),1),y("p",be,N(e?.phoneNumber),1)]),y("div",ke,[y("em",we,[C(" I'm "),y("b",null,N(!0===e?.isCodeVerified?"a driver":"just a client"),1)])]),y("div",xe,[y("em",je,[w(U,null,{default:x((()=>[e.isActive?A("",!0):(p(),j(M,{key:0,color:"danger",label:"Desactived",rounded:""})),e.isActive?(p(),j(M,{key:1,color:"success",label:"Actived",rounded:""})):A("",!0)])),_:2},1024)])]),y("div",Ae,[w(u,{color:"info",icon:"material-symbols-light:visibility-outline",elevated:"",to:`/app/carpoolers/${e.id}`},{default:x((()=>[C(" View Profile ")])),_:2},1032,["to"]),w(V,{style:{background:"var(--danger) !important",color:"#fff"},color:"danger",disabled:"",squared:"",icon:"material-symbols-light:restore-from-trash-outline"}),e.isActive?(p(),j(V,{key:0,icon:"lucide:circle-slash-2",color:"danger",title:"Deactivate profile",onClick:t=>ze(e.id,!1)},null,8,["onClick"])):A("",!0),e.isActive?A("",!0):(p(),j(V,{key:1,icon:"lucide:circle",color:"success",title:"Activate profile",onClick:t=>ze(e.id,!0)},null,8,["onClick"]))])])])))),128))]))])),_:1}),w(q,{"item-per-page":f(Fe)?.itemsPerPage,"total-items":f(Fe)?.totalItems,"current-page":f(Fe)?.page,"max-links-displayed":4,"no-router":"","onUpdate:currentPage":d[3]||(d[3]=e=>{f(Fe).page=e,Se()})},null,8,["item-per-page","total-items","current-page"])])])),_:1},8,["active"])]),(p(),j(D,{to:"body"},[f(L)?(p(),j(z,{key:0,open:f(L),"onUpdate:open":d[6]||(d[6]=e=>k(L)?L.value=e:null),title:"User Details",size:"medium",nobg:"",noheader:"",noaction:"",onClose:d[7]||(d[7]=()=>L.value=!1)},{content:x((()=>[y("div",De,[w(v,{size:"big",initials:`${f(O).userDetail?.lastName[0]}${f(O).userDetail?.firstName[0]}`,badge:f(O).badge,squared:""},null,8,["initials","badge"]),y("h3",Ce,N(`${f(O).userDetail?.lastName} ${f(O).userDetail?.firstName}`),1),y("p",null,[C(" Account created : "),y("b",null,N(f(R).fromISO(f(O).creationDate).toFormat("MMMM dd, yyyy hh:mm a")),1)]),y("div",Pe,[y("p",$e,N(f(O)?.email),1),y("p",Ie,N(f(O)?.phoneNumber),1),y("em",Ne,[C(" I'm "),y("b",null,N(!0===f(O)?.isCodeVerified?"a driver":"just a client"),1)])]),y("div",Ve,[w(u,{color:"info",icon:"material-symbols-light:visibility-outline",elevated:"",to:`/app/carpoolers/${f(O).id}`},{default:x((()=>[C(" View Profile ")])),_:1},8,["to"]),w(V,{style:{background:"var(--danger) !important",color:"#fff"},color:"danger",disabled:"",squared:"",icon:"material-symbols-light:restore-from-trash-outline"}),!0===f(O).isActive?(p(),j(V,{key:0,icon:"lucide:circle-slash-2",color:"danger",title:"Deactivate profile",onClick:d[4]||(d[4]=e=>ze(f(O).id,!1))})):A("",!0),!0!==f(O).isActive?(p(),j(V,{key:1,icon:"lucide:circle",color:"success",title:"Activate profile",onClick:d[5]||(d[5]=e=>ze(f(O).id,!0))})):A("",!0)])])])),action:x((()=>[])),_:1},8,["open"])):A("",!0)]))])}}});"function"==typeof L&&L(Me);const Ue=O(Me,[["__scopeId","data-v-d2d9edc5"]]);export{Ue as default};
