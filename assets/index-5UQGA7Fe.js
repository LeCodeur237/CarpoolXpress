import{_ as e}from"./VLoader.vue_vue_type_style_index_0_lang-Dhf66N_2.js";import{_ as s}from"./VControl-CtTfKoLz.js";import{_ as t}from"./VSwitchBlock.vue_vue_type_style_index_0_lang-SRMvAbcX.js";import{_ as a}from"./VButton.vue_vue_type_style_index_0_lang-Ct3-45wW.js";import{_ as l}from"./VAvatar.vue_vue_type_style_index_0_lang-8I4quGGY.js";import{D as i}from"./datetime-xmklhC0O.js";import{u as o}from"./defaultResource-Bdsg8Ykk.js";import{u as n}from"./useFetch-CdhACbSq.js";import{u as r}from"./viewWrapper-CXL7cLXa.js";import{e as u,r as c,Q as d,o as v,t as p,v as m,H as f,I as g,x as h,L as _,y,z as b,a1 as x,a2 as D}from"./index-9E-GM-ra.js";import{b as w}from"./route-block-B_A1xBdJ.js";import{_ as j}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./useNotyf-BOmkemzM.js";import"./notyf-WVWeOSLR.js";const N=e=>(x("data-v-3736ece8"),e=e(),D(),e),C={class:"profile-wrapper"},k={key:0,class:"notification is-danger m-4"},I={key:1,class:"profile-content"},$={class:"profile-header has-text-centered"},U={class:"title is-4 is-narrow is-thin mt-2"},A={class:"light-text"},S={class:"light-text"},V={class:"profile-stats"},M=N((()=>h("div",{class:"profile-stat"},[h("i",{"aria-hidden":"true",class:"lnil lnil-users-alt"}),h("span",null,"500+ Relations")],-1))),B=N((()=>h("div",{class:"separator"},null,-1))),L={class:"profile-stat"},R=N((()=>h("i",{"aria-hidden":"true",class:"lnil lnil-user-alt-2"},null,-1))),F={class:"profile-body"},P={class:"columns"},W={class:"column is-8"},Y={class:"profile-card"},z={class:"profile-card-section"},E=N((()=>h("div",{class:"section-title"},[h("h4",null,"About Me")],-1))),G={class:"section-content"},O={class:"description"},T={class:"profile-card-section"},q={class:"section-content"},H={class:"description text-center"},J={class:"more-button has-text-centered"},Q={class:"column is-4"},K={class:"profile-card"},X={class:"profile-card-section no-padding"},Z={class:"section-title"},ee=N((()=>h("h4",null,"Notifications",-1))),se=N((()=>h("div",{class:"section-content"},[h("div",{class:"network-notifications"},[h("h3",{class:"dark-inverted"}," Notify Your Network? "),h("p",null," Enable or disable this setting to manage if your network should be notified when you make changes to your profile. ")])],-1))),te={key:2,class:"has-text-centered p-5"},ae=[N((()=>h("p",null," Could not load user details. User may not exist or there was an issue. ",-1)))],le=u({__name:"index",setup(u){const x=o(),D=n(),w=r(),j=c(null),N=localStorage.getItem("cpx--logger_ID"),le=c(!1),ie=c(""),oe=d((()=>{const e=j.value?.userDetailConsole?.fullName;if(!e)return"?";const s=e.trim().split(" ");return 1===s.length?s[0].substring(0,2).toUpperCase():`${s[0][0]}${s[s.length-1][0]}`.toUpperCase()})),ne=e=>{if(!e)return"N/A";try{const s=e instanceof Date?i.fromJSDate(e):i.fromISO(e);if(s.isValid)return s.toFormat("dd MMMM yyyy");const t=new Date(e);return isNaN(t.getTime())?"Invalid Date":t.toLocaleDateString("en-CA",{day:"2-digit",month:"long",year:"numeric"})}catch(s){return"Invalid Date"}},re=e=>{if(!e)return"";const s=e.replace(/\D/g,"");if(11===s.length){return`+1 (${s.substring(0,3)}) ${s.substring(3,6)}-${s.substring(6,10)}`}if(12===s.length&&s.startsWith("1")){return`+1 (${s.substring(1,4)}) ${s.substring(4,7)}-${s.substring(7,11)}`}return e};return v((async()=>{await(async()=>{if(!N)return ie.value="User ID not found. Please log in again.",void(await D.logout());le.value=!0,ie.value="";try{const e=await x.find("/ConsoleUser/GetById","?userid="+N);j.value=e}catch(e){ie.value="Failed to load user details.",e.response?.data?.message&&(ie.value+=` ${e.response.data.message}`)}finally{le.value=!1}})(),w.setPageTitle("Account user")})),(i,o)=>{const n=l,r=a,u=t,c=s,d=e;return p(),m("div",C,[f(d,{active:le.value,overlay:!1},{default:g((()=>[ie.value?(p(),m("div",k,[h("button",{class:"delete",onClick:o[0]||(o[0]=e=>ie.value="")}),_(" "+y(ie.value),1)])):j.value?(p(),m("div",I,[h("div",$,[f(n,{size:"xl",initials:oe.value,squared:"","badge-src":"/images/icons/flags/france.svg"},null,8,["initials"]),h("h3",U,y(j.value.userDetailConsole?.fullName||"Unnamed User"),1),h("p",A,y(j.value.email||"No email provided"),1),h("p",S,y(re(j.value.phoneNumber)),1),h("div",V,[M,B,h("div",L,[R,h("span",null,y(j.value.roleList?.length)+" Permissions",1)])])]),h("div",F,[h("div",P,[h("div",W,[h("div",Y,[h("div",z,[E,h("div",G,[h("p",O,[h("b",null,y(j.value.userDetailConsole?.fullName),1),_(", with the email, "),h("b",null,y(j.value.email),1),_(", and phone number, "),h("b",null,y(re(j.value.phoneNumber)),1),_(", born at "+y(ne(j.value.userDetailConsole?.dateOfBirth))+". An "+y(j.value.consoleRole)+" of the platform, in the department of the "+y(j.value.userDetailConsole?.department)+" as "+y(j.value.userDetailConsole?.departmentRole)+". ",1)])])]),h("div",T,[h("div",q,[h("p",H,[_(" Your account has been created at : "),h("b",null,y(ne(j.value.creationDate)),1)])])])]),h("div",J,[f(r,{color:"danger",style:{width:"100%"},to:"/app/settings/edit-user"},{default:g((()=>[_(" Edit your informations ")])),_:1})])]),h("div",Q,[h("div",K,[h("div",X,[h("div",Z,[ee,f(c,null,{default:g((()=>[f(u,{color:"success",checked:""})])),_:1})]),se])])])])])])):le.value||ie.value?b("",!0):(p(),m("div",te,ae))])),_:1},8,["active"])])}}});"function"==typeof w&&w(le);const ie=j(le,[["__scopeId","data-v-3736ece8"]]);export{ie as default};
