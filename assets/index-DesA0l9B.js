import{_ as e}from"./VModal.vue_vue_type_style_index_0_lang-BxprIClF.js";import{_ as s}from"./VLoader.vue_vue_type_style_index_0_lang-z6CWX0dI.js";import{_ as i}from"./VFlexPagination.vue_vue_type_script_setup_true_lang-DRRY7dtM.js";import{_ as t}from"./VAvatar.vue_vue_type_style_index_0_lang-DpyihaF2.js";import{_ as a}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-B_FLCEd8.js";import{_ as l}from"./VButton.vue_vue_type_style_index_0_lang-BOJu42_j.js";import{e as r,r as n,Q as d,o,t as u,v as c,x as m,A as p,m as v,Y as h,a4 as _,j as f,R as y,S as g,H as b,I as w,J as P,z as x,a5 as C,y as D,L as j}from"./index-DCVzCXGO.js";import{_ as k,a as N}from"./search-1-dark-DV4mRi9_.js";import{u as R}from"./viewWrapper-B2fmsTqy.js";import{u as A}from"./defaultResource-BKcbMEp6.js";import{_ as V}from"./VTag.vue_vue_type_style_index_0_lang-EAZmVvoA.js";import{f as $,r as z}from"./common-CvuSpKng.js";import{D as O}from"./datetime-xmklhC0O.js";import{b as S}from"./route-block-B_A1xBdJ.js";import"./_plugin-vue_export-helper-BCo6x5W8.js";import"./useNotyf-1WfirvEN.js";import"./notyf-CueL1e6X.js";import"./useFetch-DTVXwznz.js";const E={class:"list-view-toolbar"},U={class:"is-viewmode_toggler"},F=[m("i",{class:"iconify","aria-hidden":"true","data-icon":"material-symbols-light:event-list-outline-rounded"},null,-1)],I=[m("i",{class:"iconify","aria-hidden":"true","data-icon":"material-symbols-light:grid-view-outline"},null,-1)],T={class:"search-widget ml-4",style:{width:"300px"}},J={class:"field"},L={class:"control"},q=["disabled"],M=[m("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:search"},null,-1)],W={class:"is-profile_tabs"},B=["onClick"],G={class:"buttons"},Y={class:"page-content-inner"},H=m("img",{class:"light-image",src:k,alt:""},null,-1),Q=m("img",{class:"dark-image",src:N,alt:""},null,-1),K={key:0,class:"is-trips_container is-grid grid-cols-3 gap-4"},X={class:"is-tc_head"},Z={class:"is-tch_meta"},ee={class:"has-text-primary is-underlined"},se={class:"is-tc_body"},ie={class:"is-dest_elt"},te=m("i",{class:"iconify has-text-primary","aria-hidden":"true","data-icon":"solar:map-point-bold-duotone"},null,-1),ae={class:"is-dest_details"},le={class:"is-dest_elt"},re=m("i",{class:"iconify has-text-success","aria-hidden":"true","data-icon":"solar:map-point-bold-duotone"},null,-1),ne={class:"is-dest_details"},de=m("div",{class:"is-dest_elt_divider"},null,-1),oe={class:"is-tc_footer"},ue={class:"is-tcf_l"},ce=m("i",{class:"iconify","data-icon":"solar:chair-2-line-duotone","aria-hidden":"true"},null,-1),me={class:"is-tcf_r"},pe=m("small",null,"Profit",-1),ve={style:{"font-size":"0.95rem"},class:"ml-2"},he={key:1,class:"is-list_view"},_e=m("div",{class:"is-list_header"},[m("div",{class:"is-list_header-item",style:{width:"25%"}}," # "),m("div",{class:"is-list_header-item",style:{width:"15%"}}," From "),m("div",{class:"is-list_header-item",style:{width:"15%"}}," To "),m("div",{class:"is-list_header-item",style:{width:"15%"}}," Traveling Date "),m("div",{class:"is-list_header-item",style:{width:"10%"}}," Seats "),m("div",{class:"is-list_header-item",style:{width:"10%"}}," PU "),m("div",{class:"is-list_header-item",style:{width:"10%"}}," Profit ")],-1),fe={class:"is-list_line-item is-user",style:{width:"25%"}},ye=["onClick"],ge={class:"is-user_metadata"},be={class:"has-text-primary is-underlined"},we={class:"is-list_line-item",style:{width:"15%"}},Pe={class:"is-list_line-item",style:{width:"15%"}},xe={class:"is-list_line-item",style:{width:"15%"}},Ce={class:"is-list_line-item",style:{width:"10%"}},De={class:"is-list_line-item",style:{width:"10%"}},je={style:{"font-size":"0.95rem"},class:"ml-2"},ke={class:"is-list_line-item",style:{width:"10%"}},Ne={style:{"font-size":"0.95rem"},class:"ml-2"},Re={class:"is-trip_elt",style:{"background-color":"#fff"}},Ae={class:"is-tc_head"},Ve={class:"is-tch_meta"},$e={class:"has-text-primary is-underlined"},ze={class:"is-tc_body"},Oe={class:"is-dest_elt"},Se=m("i",{class:"iconify has-text-primary","aria-hidden":"true","data-icon":"solar:map-point-bold-duotone"},null,-1),Ee={class:"is-dest_details"},Ue={class:"is-dest_elt"},Fe=m("i",{class:"iconify has-text-success","aria-hidden":"true","data-icon":"solar:map-point-bold-duotone"},null,-1),Ie={class:"is-dest_details"},Te=m("div",{class:"is-dest_elt_divider"},null,-1),Je={class:"is-tc_footer"},Le={class:"is-tcf_l"},qe=m("i",{class:"iconify","data-icon":"solar:chair-2-line-duotone","aria-hidden":"true"},null,-1),Me={class:"is-tcf_r"},We=m("small",null,"Profit",-1),Be={style:{"font-size":"0.95rem"},class:"ml-2"},Ge=r({__name:"index",setup(r){const k=R(),N=A(),S=["All","Pending","Completed","Canceled"],Ge=n(""),Ye=n(!1),He=n(!1),Qe=n("list"),Ke=n({currentPage:1,perPage:9,total:0}),Xe=n("All"),Ze=n(),es=n([]),ss=e=>{const s=O.fromISO(e).plus({hours:6});return O.now()>s},is=e=>{Ke.value.currentPage=e},ts=d((()=>{let e=es.value.filter((e=>e.user)).filter((e=>"All"===Xe.value||("Pending"===Xe.value?"1"===e.status&&!ss(e.travelingDate):"Completed"===Xe.value?"2"===e.status||ss(e.travelingDate):"Canceled"===Xe.value?"0"===e.status:void 0)));!Ge.value||Ge.value.length<1||(e=e.filter((e=>e.user?.userDetail?.firstName?.match(new RegExp(Ge.value,"i"))||e.user?.userDetail?.lastName?.match(new RegExp(Ge.value,"i"))||e.user?.email?.match(new RegExp(Ge.value,"i"))||e.departurePoint?.city?.match(new RegExp(Ge.value,"i"))||e.departurePoint?.address?.match(new RegExp(Ge.value,"i"))||e.destinationPoint?.city?.match(new RegExp(Ge.value,"i"))||e.destinationPoint?.address?.match(new RegExp(Ge.value,"i"))))),Ke.value.total=e.length;const s=(Ke.value.currentPage-1)*Ke.value.perPage,i=s+Ke.value.perPage;return e.slice(s,i)}));return o((async()=>{k.setPageTitle("List of Journeys"),await(async()=>{try{Ye.value=!0;const e=await N.list("/DriverJourney/GetAllJourney");if(Ke.value.total=e.length,e){const s=await Promise.all(e.map((async e=>{const s=await N.list(`/User/FindUserById?userid=${e.userId}`);return{...e,user:s}})));es.value=s}}catch(e){console.error("An error has occurred: ",e)}finally{Ye.value=!1}})()})),(r,n)=>{const d=l,o=a,k=t,N=i,R=s,A=e;return u(),c("div",null,[m("div",E,[m("div",U,[m("span",{class:p(["is-viewmode","list"===v(Qe)&&"is-active"]),onClick:n[0]||(n[0]=e=>Qe.value="list")},F,2),m("span",{class:p(["is-viewmode","grid"===v(Qe)&&"is-active"]),onClick:n[1]||(n[1]=e=>Qe.value="grid")},I,2)]),m("div",T,[m("div",J,[m("div",L,[h(m("input",{"onUpdate:modelValue":n[2]||(n[2]=e=>f(Ge)?Ge.value=e:null),type:"text",class:"input",placeholder:"Rechercher..."},null,512),[[_,v(Ge)]]),m("button",{class:"search-button",disabled:v(Ge).length<1},M,8,q)])])]),m("ul",W,[(u(),c(y,null,g(S,((e,s)=>m("li",{key:s,class:p([e===v(Xe)&&"is-active_tab","is-p_tab"]),onClick:s=>Xe.value=e},D(e),11,B))),64))]),m("div",G,[b(d,{color:"primary",icon:"feather:refresh-ccw",elevated:"",rounded:""},{default:w((()=>[j(" Refresh ")])),_:1})])]),b(R,{active:v(Ye)},{default:w((()=>[m("div",Y,[0===v(ts).length?(u(),P(o,{key:0,title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n              filter terms you've entered. Please try different filter terms or\n              criteria.",larger:""},{image:w((()=>[H,Q])),_:1})):(u(),c(y,{key:1},["grid"===v(Qe)?(u(),c("div",K,[(u(!0),c(y,null,g(v(ts),(e=>(u(),c("div",{key:e.id,class:"is-trip_elt"},[m("div",X,[b(k,{squared:"",size:"big",picture:`data:image/jpeg;base64,${e.user?.profilePhoto?.photo}`,initials:`${e.user?.userDetail?.lastName[0]}${e.user?.userDetail?.firstName[0]}`},null,8,["picture","initials"]),m("div",Z,[m("h3",null,D(`${e.user?.userDetail?.lastName} ${e.user?.userDetail?.firstName}`),1),m("span",null,D(e.user?.email),1),m("span",ee,D(e.user?.phoneNumber),1),b(V,{size:"tiny",color:e.user?.isCodeVerified?"success":"danger",style:{width:"fit-content","line-height":"1.6"}},{default:w((()=>[j(D(e.user?.isCodeVerified?"Verified":"Not Verified"),1)])),_:2},1032,["color"])])]),m("div",se,[m("div",ie,[te,m("div",ae,[m("h4",null,D(e?.departurePoint?.city??"City"),1),m("span",null,D(e?.departurePoint?.address??"Address"),1)])]),m("div",le,[re,m("div",ne,[m("h4",null,D(e?.destinationPoint?.city??"City"),1),m("span",null,D(e?.destinationPoint?.address??"Address"),1)])]),de]),m("div",oe,[m("div",ue,[ce,m("span",null,D(e.avalableSeets)+" available seat(s)",1)]),m("div",me,[b(V,{style:{width:"fit-content","line-height":"1.6",display:"flex"},color:"primary"},{default:w((()=>[pe,m("b",ve,D(e.listOfReservations?v($)(e.listOfReservations?.filter((e=>"1"==e.isCanceled)).reduce(((e,s)=>e+s.totalAmount),0)):v($)(0)),1)])),_:2},1024),m("span",null,D(v(z)(e.travelingDate)),1)])])])))),128))])):(u(),c("div",he,[_e,(u(!0),c(y,null,g(v(ts),(e=>(u(),c("div",{key:e.id,class:"is-list_line"},[m("div",fe,[m("div",{onClick:()=>{Ze.value=e,He.value=!0}},[b(k,{squared:"",size:"medium",picture:`data:image/jpeg;base64,${e.user?.profilePhoto?.photo}`,initials:`${e.user?.userDetail?.lastName[0]}${e.user?.userDetail?.firstName[0]}`},null,8,["picture","initials"])],8,ye),m("div",ge,[m("h3",null,D(`${e.user?.userDetail?.lastName} ${e.user?.userDetail?.firstName}`),1),m("p",null,D(e.user?.email),1),m("p",be,D(e.user?.phoneNumber),1)])]),m("div",we,[m("p",null,D(e?.departurePoint?.city??"City"),1),m("span",null,D(e?.departurePoint?.address??"Address"),1)]),m("div",Pe,[m("p",null,D(e?.destinationPoint?.city??"City"),1),m("span",null,D(e?.destinationPoint?.address??"Address"),1)]),m("div",xe,[m("span",null,D(v(O).fromISO(e.travelingDate).toFormat("dd/MM/yy, hh:mm a")),1)]),m("div",Ce,[m("p",null,D(e.listOfReservations?.length??0)+" / "+D(e.avalableSeets),1)]),m("div",De,[m("b",je,D(v($)(e.amountPerSeet)),1)]),m("div",ke,[b(V,{style:{width:"fit-content","line-height":"1.6",display:"flex"},color:"success"},{default:w((()=>[m("b",Ne,D(e.listOfReservations?v($)(e.listOfReservations?.filter((e=>"1"==e.isCanceled)).reduce(((e,s)=>e+s.totalAmount),0)):v($)(0)),1)])),_:2},1024)])])))),128))])),b(N,{"current-page":v(Ke).currentPage,"onUpdate:currentPage":[n[3]||(n[3]=e=>v(Ke).currentPage=e),is],"item-per-page":v(Ke).perPage,"total-items":v(Ke).total,"max-links-displayed":7,"no-router":""},null,8,["current-page","item-per-page","total-items"])],64))])])),_:1},8,["active"]),(u(),P(C,{to:"body"},[v(He)?(u(),P(A,{key:0,open:v(He),"onUpdate:open":n[4]||(n[4]=e=>f(He)?He.value=e:null),title:"User Details",size:"large",nobg:"",noheader:"",noaction:"",onClose:n[5]||(n[5]=()=>He.value=!1)},{content:w((()=>[m("div",Re,[m("div",Ae,[b(k,{squared:"",size:"big",picture:`data:image/jpeg;base64,${v(Ze).user?.profilePhoto?.photo}`,initials:`${v(Ze).user?.userDetail?.lastName[0]}${v(Ze).user?.userDetail?.firstName[0]}`},null,8,["picture","initials"]),m("div",Ve,[m("h3",null,D(`${v(Ze).user?.userDetail?.lastName} ${v(Ze).user?.userDetail?.firstName}`),1),m("span",null,D(v(Ze).user?.email),1),m("span",$e,D(v(Ze).user?.phoneNumber),1),b(V,{size:"tiny",color:v(Ze).user?.isCodeVerified?"success":"danger",style:{width:"fit-content","line-height":"1.6"}},{default:w((()=>[j(D(v(Ze).user?.isCodeVerified?"Verified":"Not Verified"),1)])),_:1},8,["color"])])]),m("div",ze,[m("div",Oe,[Se,m("div",Ee,[m("h4",null,D(v(Ze)?.departurePoint?.city??"City"),1),m("span",null,D(v(Ze)?.departurePoint?.address??"Address"),1)])]),m("div",Ue,[Fe,m("div",Ie,[m("h4",null,D(v(Ze)?.destinationPoint?.city??"City"),1),m("span",null,D(v(Ze)?.destinationPoint?.address??"Address"),1)])]),Te]),m("div",Je,[m("div",Le,[qe,m("span",null,D(v(Ze).avalableSeets)+" available seat(s)",1)]),m("div",Me,[b(V,{style:{width:"fit-content","line-height":"1.6",display:"flex"},color:"primary"},{default:w((()=>[We,m("b",Be,D(v(Ze).listOfReservations?v($)(v(Ze).listOfReservations?.filter((e=>"1"==e.isCanceled)).reduce(((e,s)=>e+s.totalAmount),0)):v($)(0)),1)])),_:1}),m("span",null,D(v(z)(v(Ze).travelingDate)),1)])])])])),action:w((()=>[])),_:1},8,["open"])):x("",!0)]))])}}});"function"==typeof S&&S(Ge);export{Ge as default};
